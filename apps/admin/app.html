<!doctype html>
<html lang="ja">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>通知運用ダッシュボード（Linear UI）</title>
    <link rel="stylesheet" href="/admin/assets/admin.css" />
  </head>
  <body class="app-body">
    <div id="app-shell" class="app-shell" data-role="operator">
      <aside class="app-nav">
        <div class="nav-title" data-dict-key="ui.label.nav.title">運用ナビ</div>
        <button class="nav-item is-active" data-pane-target="home">
          <span class="nav-icon" aria-hidden="true">H</span>
          <span data-dict-key="ui.label.nav.home">ホーム</span>
        </button>
        <button class="nav-item" data-pane-target="composer">
          <span class="nav-icon" aria-hidden="true">C</span>
          <span data-dict-key="ui.label.nav.compose">通知配信</span>
        </button>
        <button class="nav-item" data-pane-target="monitor">
          <span class="nav-icon" aria-hidden="true">M</span>
          <span data-dict-key="ui.label.nav.monitor">配信結果</span>
        </button>
        <button class="nav-item" data-pane-target="errors">
          <span class="nav-icon" aria-hidden="true">E</span>
          <span data-dict-key="ui.label.nav.errors">異常対応</span>
        </button>
        <button class="nav-item" data-pane-target="read-model">
          <span class="nav-icon" aria-hidden="true">R</span>
          <span data-dict-key="ui.label.nav.readModel">通知集計</span>
        </button>
        <button class="nav-item" data-pane-target="vendors">
          <span class="nav-icon" aria-hidden="true">V</span>
          <span data-dict-key="ui.label.nav.vendors">Vendor Hub</span>
        </button>
        <button class="nav-item" data-pane-target="city-pack">
          <span class="nav-icon" aria-hidden="true">CP</span>
          <span data-dict-key="ui.label.nav.cityPack">City Pack監査</span>
        </button>
        <button class="nav-item" data-pane-target="audit">
          <span class="nav-icon" aria-hidden="true">A</span>
          <span data-dict-key="ui.label.nav.audit">証跡</span>
        </button>
        <button class="nav-item" data-pane-target="settings">
          <span class="nav-icon" aria-hidden="true">S</span>
          <span data-dict-key="ui.label.nav.settings">設定</span>
        </button>
        <button class="nav-item" data-pane-target="llm" data-role="admin">
          <span class="nav-icon" aria-hidden="true">L</span>
          <span data-dict-key="ui.label.nav.llm">LLM支援</span>
        </button>
        <button class="nav-item" data-pane-target="maintenance" data-role="admin">
          <span class="nav-icon" aria-hidden="true">M</span>
          <span data-dict-key="ui.label.nav.maintenance">回復・保守</span>
        </button>
      </aside>

      <main class="app-content">
        <header class="app-topbar">
          <div class="top-metric">
            <div class="top-label" data-dict-key="ui.label.top.todo">今日の要対応</div>
            <div id="top-todo" class="top-value">0</div>
          </div>
          <div class="top-metric">
            <div class="top-label" data-dict-key="ui.label.top.health">状態内訳</div>
            <div id="top-health" class="top-sub" data-dict-key="ui.desc.top.healthDefault">要対応 0 / 注意 0 / 問題なし 0 / 未設定 0</div>
          </div>
          <div class="top-metric">
            <div class="top-label" data-dict-key="ui.label.top.anomaly">直近の異常</div>
            <div id="top-anomaly" class="top-sub">-</div>
          </div>
          <div class="top-role">
            <span class="role-label" data-dict-key="ui.label.role">Role</span>
            <div class="role-switch" role="group" aria-label="Role Switch">
              <button class="role-btn is-active" data-role-value="operator" data-dict-key="ui.label.role.operator">運用者</button>
              <button class="role-btn" data-role-value="admin" data-dict-key="ui.label.role.admin">管理者</button>
            </div>
          </div>
        </header>

        <h1 data-dict-key="ui.label.app.title">通知運用ダッシュボード（Linear UI）</h1>

        <section id="pane-home" class="app-pane is-active" data-pane="home">
          <div class="decision-card" id="home-decision-card">
            <div class="decision-card-header">
              <div class="decision-title" data-dict-key="ui.label.home.today">今日の要対応</div>
              <span id="home-decision-state" class="decision-state state-ready">READY</span>
            </div>
            <div id="home-decision-reason1" class="decision-reason">-</div>
            <div id="home-decision-reason2" class="decision-reason">-</div>
            <div class="decision-updated">
              <span data-dict-key="ui.label.decision.updatedAt">最終更新</span>
              <span id="home-decision-updated">-</span>
            </div>
            <div class="decision-actions">
              <button type="button" class="decision-action-btn" data-open-pane="errors" data-action-kind="primary" data-dict-key="ui.label.decision.action.createEdit">作成・編集</button>
              <button type="button" class="decision-action-btn" data-open-pane="composer" data-action-kind="secondary" data-dict-key="ui.label.decision.action.activate">有効化・公開</button>
              <button type="button" class="decision-action-btn" data-open-pane="monitor" data-action-kind="tertiary" data-dict-key="ui.label.decision.action.disable">停止・無効化</button>
            </div>
          </div>
          <details id="home-pane-details" class="decision-details section">
            <summary data-dict-key="ui.label.decision.details">詳細</summary>
            <div class="pane-grid">
              <div class="pane-main">
                <div class="panel">
                  <div class="panel-title" data-dict-key="ui.label.home.tasks">今日やること</div>
                  <div class="panel-body task-card-list">
                    <button type="button" class="task-card-btn" data-open-pane="errors">
                      <span data-dict-key="ui.label.home.task.errors">異常確認から開始</span>
                    </button>
                    <button type="button" class="task-card-btn" data-open-pane="composer">
                      <span data-dict-key="ui.label.home.task.compose">通知を作成・承認</span>
                    </button>
                    <button type="button" class="task-card-btn" data-open-pane="monitor">
                      <span data-dict-key="ui.label.home.task.monitor">結果と証跡を確認</span>
                    </button>
                    <button type="button" class="task-card-btn" data-open-pane="city-pack">
                      <span data-dict-key="ui.label.home.task.cityPack">City Pack情報源を監査</span>
                    </button>
                  </div>
                </div>
              </div>
              <div class="pane-detail">
                <div class="panel">
                  <div class="panel-title" data-dict-key="ui.label.home.today">今日の要対応</div>
                  <div class="panel-body">
                    <div class="today-metrics">
                      <div><span class="metric-label" data-dict-key="ui.metric.todo.count">要対応件数</span><span id="home-todo" class="metric-value">0</span></div>
                      <div><span class="metric-label" data-dict-key="ui.metric.todo.causes">主因トップ3</span><span id="home-causes" class="metric-value">-</span></div>
                      <div><span class="metric-label" data-dict-key="ui.metric.todo.anomaly">直近の異常</span><span id="home-anomaly" class="metric-value">-</span></div>
                    </div>
                  </div>
                </div>
              </div>
              <aside class="pane-actions">
                <div class="action-panel">
                  <div class="panel-title" data-dict-key="ui.label.panel.actions">操作パネル</div>
                  <div class="panel-body">
                    <div class="note">
                      <label data-dict-key="ui.label.home.test.notificationId" data-dict-tip="ui.help.home.test.notificationId">通知ID</label>
                      <input id="home-test-notification-id" class="input-inline input-min-260" />
                    </div>
                    <div class="note">
                      <label data-dict-key="ui.label.home.test.lineUserId" data-dict-tip="ui.help.home.test.lineUserId">LINEユーザーID</label>
                      <input id="home-test-line-user-id" class="input-inline input-min-260" />
                    </div>
                    <div class="note">
                      <label data-dict-key="ui.label.home.test.mode" data-dict-tip="ui.help.home.test.mode">テスト方式</label>
                      <select id="home-test-mode" class="select-inline">
                        <option value="dry_run" data-dict-key="ui.value.home.test.mode.dry">検証のみ</option>
                        <option value="self_send" data-dict-key="ui.value.home.test.mode.self">自己送信</option>
                      </select>
                    </div>
                    <div class="row row-top">
                      <button id="home-run-test" type="button" data-dict-key="ui.label.home.test.run">テスト実行（安全）</button>
                    </div>
                    <details class="section">
                      <summary data-dict-key="ui.label.home.test.result">テスト結果</summary>
                      <pre id="home-test-result">-</pre>
                    </details>
                  </div>
                </div>
              </aside>
            </div>
          </details>
        </section>

        <section id="pane-composer" class="app-pane" data-pane="composer">
          <div class="decision-card" id="composer-decision-card">
            <div class="decision-card-header">
              <div class="decision-title" data-dict-key="ui.label.composer.summary">通知サマリー</div>
              <span id="composer-decision-state" class="decision-state state-ready">READY</span>
            </div>
            <div id="composer-decision-reason1" class="decision-reason">-</div>
            <div id="composer-decision-reason2" class="decision-reason">-</div>
            <div class="decision-updated">
              <span data-dict-key="ui.label.decision.updatedAt">最終更新</span>
              <span id="composer-decision-updated">-</span>
            </div>
            <div class="decision-actions">
              <button id="composer-action-edit" type="button" class="decision-action-btn" data-action-kind="primary" data-dict-key="ui.label.decision.action.createEdit">作成・編集</button>
              <button id="composer-action-activate" type="button" class="decision-action-btn" data-action-kind="secondary" data-dict-key="ui.label.decision.action.activate">有効化・公開</button>
              <button id="composer-action-disable" type="button" class="decision-action-btn" data-action-kind="tertiary" data-dict-key="ui.label.decision.action.disable">停止・無効化</button>
            </div>
          </div>
          <details id="composer-pane-details" class="decision-details section">
            <summary data-dict-key="ui.label.decision.details">詳細</summary>
            <div class="composer-workspace">
              <div class="panel composer-header">
                <div class="panel-body">
                  <div class="composer-header-row">
                    <div class="composer-trace">
                      <label for="traceId" data-dict-key="ui.label.traceId" data-dict-tip="ui.help.traceId">追跡ID</label>
                      <input type="text" id="traceId" class="input-inline input-trace" />
                      <button id="regen-trace" type="button" data-dict-key="ui.label.trace.regen">再生成</button>
                    </div>
                    <div class="composer-status-wrap">
                      <span class="metric-label" data-dict-key="ui.label.composer.statusSimple">状態</span>
                      <span id="composer-status-pill" class="badge badge-info">draft</span>
                    </div>
                    <div class="composer-primary-actions">
                      <button id="create-draft" type="button" data-dict-key="ui.label.composer.create">下書き作成</button>
                      <button id="approve" type="button" data-dict-key="ui.label.composer.approve">承認（有効化）</button>
                      <button id="execute" type="button" data-dict-key="ui.label.composer.execute">送信実行</button>
                    </div>
                  </div>
                </div>
              </div>

              <div class="composer-layout">
                <div class="panel composer-form-panel">
                  <div class="panel-title" data-dict-key="ui.label.composer.inputs">通知入力</div>
                  <div class="panel-body">
                    <div class="input-grid">
                      <div>
                        <label for="notificationType" data-dict-key="ui.label.composer.type" data-dict-tip="ui.help.composer.type">通知タイプ</label>
                        <select id="notificationType">
                          <option value="GENERAL">GENERAL</option>
                          <option value="ANNOUNCEMENT">ANNOUNCEMENT</option>
                          <option value="VENDOR">VENDOR</option>
                          <option value="AB">AB</option>
                          <option value="STEP" selected>STEP</option>
                        </select>
                      </div>
                      <div>
                        <label for="title" data-dict-key="ui.label.composer.title" data-dict-tip="ui.help.composer.title">タイトル</label>
                        <input id="title" data-dict-placeholder="ui.desc.composer.titlePlaceholder" placeholder="" />
                      </div>
                      <div>
                        <label for="body" data-dict-key="ui.label.composer.body" data-dict-tip="ui.help.composer.body">本文</label>
                        <textarea id="body" data-dict-placeholder="ui.desc.composer.bodyPlaceholder" placeholder=""></textarea>
                      </div>
                      <div>
                        <label for="ctaText" data-dict-key="ui.label.composer.cta" data-dict-tip="ui.help.composer.cta">ボタン文言</label>
                        <input id="ctaText" data-dict-placeholder="ui.desc.composer.ctaPlaceholder" placeholder="" />
                      </div>
                      <div>
                        <label for="linkRegistryId" data-dict-key="ui.label.composer.link" data-dict-tip="ui.help.composer.link">リンクID</label>
                        <input id="linkRegistryId" data-dict-placeholder="ui.desc.composer.linkPlaceholder" placeholder="" />
                      </div>
                      <div>
                        <label for="notificationCategory" data-dict-key="ui.label.composer.category" data-dict-tip="ui.help.composer.category">カテゴリ</label>
                        <select id="notificationCategory">
                          <option value="DEADLINE_REQUIRED">DEADLINE_REQUIRED</option>
                          <option value="IMMEDIATE_ACTION">IMMEDIATE_ACTION</option>
                          <option value="SEQUENCE_GUIDANCE" selected>SEQUENCE_GUIDANCE</option>
                          <option value="TARGETED_ONLY">TARGETED_ONLY</option>
                          <option value="COMPLETION_CONFIRMATION">COMPLETION_CONFIRMATION</option>
                        </select>
                      </div>
                    </div>
                    <div id="composer-type-fields" class="composer-type-fields">
                      <div class="input-grid type-fields" data-type-fields="ANNOUNCEMENT">
                        <div class="row">
                          <div class="flex-1">
                            <label for="metaAnnouncementExpiry" data-dict-key="ui.label.composer.announcement.expiry">公開期限（任意）</label>
                            <input id="metaAnnouncementExpiry" />
                          </div>
                          <div class="flex-1">
                            <label for="metaAnnouncementPriority" data-dict-key="ui.label.composer.announcement.priority">優先度（任意）</label>
                            <select id="metaAnnouncementPriority">
                              <option value="">-</option>
                              <option value="low">low</option>
                              <option value="medium">medium</option>
                              <option value="high">high</option>
                            </select>
                          </div>
                        </div>
                      </div>
                      <div class="input-grid type-fields" data-type-fields="VENDOR">
                        <div class="row">
                          <div class="flex-1">
                            <label for="metaVendorId" data-dict-key="ui.label.composer.vendor.vendorId">ベンダーID</label>
                            <input id="metaVendorId" />
                          </div>
                          <div class="flex-1">
                            <label for="metaVendorTargeting" data-dict-key="ui.label.composer.vendor.targeting">対象条件（任意）</label>
                            <input id="metaVendorTargeting" />
                          </div>
                        </div>
                      </div>
                      <div class="input-grid type-fields" data-type-fields="AB">
                        <div class="row">
                          <div class="flex-1">
                            <label for="metaAbVariants" data-dict-key="ui.label.composer.ab.variants">バリエーション</label>
                            <input id="metaAbVariants" data-dict-placeholder="ui.desc.composer.ab.variantsPlaceholder" placeholder="" />
                          </div>
                          <div class="flex-1">
                            <label for="metaAbRatio" data-dict-key="ui.label.composer.ab.ratio">比率</label>
                            <input id="metaAbRatio" data-dict-placeholder="ui.desc.composer.ab.ratioPlaceholder" placeholder="" />
                          </div>
                          <div class="flex-1">
                            <label for="metaAbMetric" data-dict-key="ui.label.composer.ab.metric">指標</label>
                            <input id="metaAbMetric" />
                          </div>
                        </div>
                      </div>
                      <div class="input-grid type-fields" data-type-fields="STEP">
                        <div class="row">
                          <div class="flex-1">
                            <label for="scenarioKey" data-dict-key="ui.label.composer.scenario" data-dict-tip="ui.help.composer.scenario">シナリオ</label>
                            <select id="scenarioKey">
                              <option value="A">A</option>
                              <option value="C">C</option>
                            </select>
                          </div>
                          <div class="flex-1">
                            <label for="stepKey" data-dict-key="ui.label.composer.step" data-dict-tip="ui.help.composer.step">ステップ</label>
                            <select id="stepKey">
                              <option value="3mo">3mo</option>
                              <option value="2mo">2mo</option>
                              <option value="1mo">1mo</option>
                              <option value="week" selected>week</option>
                              <option value="after1w">after1w</option>
                              <option value="after1mo">after1mo</option>
                            </select>
                          </div>
                        </div>
                        <div class="row">
                          <div class="flex-1">
                            <label for="targetRegion" data-dict-key="ui.label.composer.region" data-dict-tip="ui.help.composer.region">地域（任意）</label>
                            <input id="targetRegion" />
                          </div>
                          <div class="flex-1">
                            <label for="targetLimit" data-dict-key="ui.label.composer.limit" data-dict-tip="ui.help.composer.limit">上限件数（必須）</label>
                            <input id="targetLimit" type="number" min="1" max="500" value="50" />
                          </div>
                        </div>
                        <label class="checkbox" data-dict-tip="ui.help.composer.membersOnly"><input id="membersOnly" type="checkbox" /> <span data-dict-key="ui.label.composer.membersOnly">会員のみ</span></label>
                      </div>
                    </div>
                    <div class="row row-top">
                      <button id="preview" type="button" data-dict-key="ui.label.composer.preview">プレビュー</button>
                      <button id="plan" type="button" data-role="admin" data-dict-key="ui.label.composer.plan">送信計画</button>
                    </div>
                  </div>
                </div>

                <div class="panel composer-preview-panel">
                  <div class="panel-title" data-dict-key="ui.label.composer.livePreview">ライブプレビュー</div>
                  <div class="panel-body">
                    <div class="line-preview-phone">
                      <div class="line-preview-header">LINE</div>
                      <div class="line-preview-body">
                        <div class="line-preview-title" id="composer-preview-title">-</div>
                        <div class="line-preview-text" id="composer-preview-body">-</div>
                        <button type="button" class="line-preview-cta" id="composer-preview-cta">-</button>
                        <div class="line-preview-link" id="composer-preview-link">-</div>
                      </div>
                    </div>
                    <div class="summary-badge">
                      <span id="composer-safety" class="badge badge-ok" data-dict-key="ui.status.ok">問題なし</span>
                      <span data-dict-key="ui.label.composer.safety">送信前安全チェック</span>
                    </div>
                  </div>
                </div>
              </div>

              <div class="panel composer-saved-panel">
                <div class="panel-title" data-dict-key="ui.label.composer.saved">保存済み通知</div>
                <div class="panel-body">
                  <div class="input-grid">
                    <div class="row">
                      <div class="flex-1">
                        <label for="composer-saved-search" data-dict-key="ui.label.composer.saved.search">検索</label>
                        <input id="composer-saved-search" />
                      </div>
                      <div class="flex-1">
                        <label for="composer-saved-status" data-dict-key="ui.label.composer.saved.status">状態</label>
                        <select id="composer-saved-status">
                          <option value="">all</option>
                          <option value="draft">draft</option>
                          <option value="approved">approved</option>
                          <option value="active">active</option>
                          <option value="sent">sent</option>
                        </select>
                      </div>
                      <div class="flex-1">
                        <label for="composer-saved-type" data-dict-key="ui.label.composer.saved.type">タイプ</label>
                        <select id="composer-saved-type">
                          <option value="">all</option>
                          <option value="GENERAL">GENERAL</option>
                          <option value="ANNOUNCEMENT">ANNOUNCEMENT</option>
                          <option value="VENDOR">VENDOR</option>
                          <option value="AB">AB</option>
                          <option value="STEP">STEP</option>
                        </select>
                      </div>
                    </div>
                    <div class="row">
                      <div class="flex-1">
                        <label for="composer-saved-category" data-dict-key="ui.label.composer.saved.category">カテゴリ</label>
                        <input id="composer-saved-category" />
                      </div>
                      <div class="flex-1">
                        <label for="composer-saved-scenario" data-dict-key="ui.label.composer.saved.scenario">シナリオ</label>
                        <input id="composer-saved-scenario" />
                      </div>
                      <div class="flex-1">
                        <label for="composer-saved-step" data-dict-key="ui.label.composer.saved.step">ステップ</label>
                        <input id="composer-saved-step" />
                      </div>
                    </div>
                  </div>
                  <table class="table-compact composer-saved-table">
                    <thead>
                      <tr>
                        <th data-dict-key="ui.label.composer.saved.col.title">タイトル</th>
                        <th data-dict-key="ui.label.composer.saved.col.type">タイプ</th>
                        <th data-dict-key="ui.label.composer.saved.col.status">状態</th>
                        <th data-dict-key="ui.label.composer.saved.col.category">カテゴリ</th>
                        <th data-dict-key="ui.label.composer.saved.col.scenario">シナリオ</th>
                        <th data-dict-key="ui.label.composer.saved.col.step">ステップ</th>
                        <th data-dict-key="ui.label.composer.saved.col.createdAt">作成日</th>
                        <th data-dict-key="ui.label.composer.saved.col.actions">操作</th>
                      </tr>
                    </thead>
                    <tbody id="composer-saved-rows"></tbody>
                  </table>
                </div>
              </div>

              <details class="panel">
                <summary data-dict-key="ui.label.composer.details">詳細（内部キー）</summary>
                <div class="panel-body">
                  <div class="note"><span data-dict-key="ui.label.composer.notificationId">通知ID</span>: <span id="notificationId">-</span></div>
                  <div class="note"><span data-dict-key="ui.label.composer.planHash">計画ハッシュ</span>: <span id="planHash">-</span></div>
                  <div class="note"><span data-dict-key="ui.label.composer.confirmToken">確認トークン</span>: <span id="confirmToken">-</span></div>
                  <div class="note"><span data-dict-key="ui.label.composer.planTarget">対象人数（plan）</span>: <span id="planTargetCount">-</span></div>
                  <div class="note"><span data-dict-key="ui.label.composer.planBlocked">抑制数（plan）</span>: <span id="planCapBlockedCount">-</span></div>
                  <div class="note" id="execute-cap-meta" data-dict-key="ui.desc.composer.executeMeta">計数方式: - / 計数元: - / 計数戦略: - / 最終理由: -</div>
                  <pre id="draft-result">-</pre>
                  <pre id="plan-result">-</pre>
                  <pre id="execute-result">-</pre>
                </div>
              </details>
            </div>
          </details>
        </section>

        <section id="pane-monitor" class="app-pane" data-pane="monitor">
          <div class="decision-card" id="monitor-decision-card">
            <div class="decision-card-header">
              <div class="decision-title" data-dict-key="ui.label.nav.monitor">配信結果</div>
              <span id="monitor-decision-state" class="decision-state state-ready">READY</span>
            </div>
            <div id="monitor-decision-reason1" class="decision-reason">-</div>
            <div id="monitor-decision-reason2" class="decision-reason">-</div>
            <div class="decision-updated">
              <span data-dict-key="ui.label.decision.updatedAt">最終更新</span>
              <span id="monitor-decision-updated">-</span>
            </div>
            <div class="decision-actions">
              <button id="monitor-action-edit" type="button" class="decision-action-btn" data-action-kind="primary" data-dict-key="ui.label.decision.action.createEdit">作成・編集</button>
              <button id="monitor-action-activate" type="button" class="decision-action-btn" data-action-kind="secondary" data-dict-key="ui.label.decision.action.activate">有効化・公開</button>
              <button id="monitor-action-disable" type="button" class="decision-action-btn" data-action-kind="tertiary" data-dict-key="ui.label.decision.action.disable">停止・無効化</button>
            </div>
          </div>
          <details id="monitor-pane-details" class="decision-details section">
            <summary data-dict-key="ui.label.decision.details">詳細</summary>
            <div class="pane-grid">
            <div class="pane-main">
              <div class="panel today-card">
                <div class="panel-title" data-dict-key="ui.label.monitor.today">今日の要対応</div>
                <div class="panel-body">
                  <div class="today-metrics">
                    <div><span class="metric-label" data-dict-key="ui.metric.todo.count">要対応件数</span><span id="monitor-todo" class="metric-value">0</span></div>
                    <div><span class="metric-label" data-dict-key="ui.metric.todo.causes">主因トップ3</span><span id="monitor-causes" class="metric-value">-</span></div>
                    <div><span class="metric-label" data-dict-key="ui.metric.todo.anomaly">直近の異常</span><span id="monitor-anomaly" class="metric-value">-</span></div>
                  </div>
                </div>
              </div>
              <div class="panel">
                <div class="panel-title" data-dict-key="ui.label.monitor.userTimeline">ユーザー別通知履歴</div>
                <div class="panel-body">
                  <div class="note" data-dict-key="ui.desc.monitor.userTimeline">LINEユーザーIDまたは会員番号で、配信履歴を時系列で確認します。</div>
                  <div class="row">
                    <label class="flex-1" data-dict-key="ui.label.monitor.userLineUserId" data-dict-tip="ui.help.monitor.userLineUserId">LINEユーザーID
                      <input type="text" id="monitor-user-line-user-id" />
                    </label>
                    <label class="flex-1" data-dict-key="ui.label.monitor.userMemberNumber" data-dict-tip="ui.help.monitor.userMemberNumber">会員番号
                      <input type="text" id="monitor-user-member-number" />
                    </label>
                    <label data-dict-key="ui.label.monitor.userLimit" data-dict-tip="ui.help.monitor.userLimit">件数
                      <input type="number" id="monitor-user-limit" class="input-sm" min="1" max="200" value="50" />
                    </label>
                  </div>
                  <div class="row row-top">
                    <button id="monitor-user-search" type="button" data-dict-key="ui.label.monitor.userSearch">履歴を検索</button>
                  </div>
                  <table class="table-compact">
                    <thead>
                      <tr>
                        <th data-dict-key="ui.label.monitor.userCol.sentAt">送信日時</th>
                        <th data-dict-key="ui.label.monitor.userCol.deliveryAt">到達日時</th>
                        <th data-dict-key="ui.label.monitor.userCol.user">対象ユーザー</th>
                        <th data-dict-key="ui.label.monitor.userCol.notification">通知</th>
                        <th data-dict-key="ui.label.monitor.userCol.status">状態</th>
                        <th data-dict-key="ui.label.monitor.userCol.failure">送信できなかった理由</th>
                      </tr>
                    </thead>
                    <tbody id="monitor-user-rows"></tbody>
                  </table>
                </div>
              </div>
              <div class="panel">
                <div class="panel-title" data-dict-key="ui.label.monitor.insights">クリック分析（7日/30日）</div>
                <div class="panel-body">
                  <div class="note" data-dict-key="ui.desc.monitor.insights">配信実績からベンダー別反応率、AB状況、FAQ参照Topを表示します。</div>
                  <div class="row">
                    <label data-dict-key="ui.label.monitor.windowDays" data-dict-tip="ui.help.monitor.windowDays">集計期間
                      <select id="monitor-window-days" class="select-inline">
                        <option value="7" data-dict-key="ui.value.monitor.window.7">直近7日</option>
                        <option value="30" data-dict-key="ui.value.monitor.window.30">直近30日</option>
                      </select>
                    </label>
                    <button id="monitor-insights-reload" type="button" data-dict-key="ui.label.monitor.insightsReload">分析を更新</button>
                  </div>
	                  <div class="grid">
	                    <details class="table-section section" open>
	                      <summary data-dict-key="ui.label.monitor.vendorCtr">ベンダー別CTR Top</summary>
	                      <div class="table-scroll">
	                        <table class="table-compact">
	                          <thead>
	                            <tr>
	                              <th data-dict-key="ui.label.monitor.vendorCol.name">ベンダー</th>
	                              <th data-dict-key="ui.label.monitor.vendorCol.sent">送信</th>
	                              <th data-dict-key="ui.label.monitor.vendorCol.click">クリック</th>
	                              <th data-dict-key="ui.label.monitor.vendorCol.ctr">反応率</th>
	                            </tr>
	                          </thead>
	                          <tbody id="monitor-vendor-rows"></tbody>
	                        </table>
	                      </div>
	                    </details>
	                    <details class="table-section section" open>
	                      <summary data-dict-key="ui.label.monitor.abFaq">AB/FAQ状況</summary>
	                      <div id="monitor-ab-summary" class="note">-</div>
	                      <div class="table-scroll">
	                        <table class="table-compact">
	                          <thead>
	                            <tr>
	                              <th data-dict-key="ui.label.monitor.faqCol.article">FAQ記事</th>
	                              <th data-dict-key="ui.label.monitor.faqCol.count">参照回数</th>
	                            </tr>
	                          </thead>
	                          <tbody id="monitor-faq-rows"></tbody>
	                        </table>
	                      </div>
	                    </details>
	                  </div>
	                </div>
	              </div>

	              <details class="table-section section">
	                <summary data-dict-key="ui.label.monitor.table">配信結果（参照）</summary>
	                <div class="table-scroll">
	                  <table class="table-compact">
	                    <thead>
	                      <tr>
	                        <th data-dict-key="ui.label.monitor.col.title" data-dict-tip="ui.help.monitor.title">タイトル</th>
	                        <th data-dict-key="ui.label.monitor.col.scenario" data-dict-tip="ui.help.monitor.scenario">シナリオ</th>
	                        <th data-dict-key="ui.label.monitor.col.step" data-dict-tip="ui.help.monitor.step">ステップ</th>
	                        <th data-dict-key="ui.label.monitor.col.target" data-dict-tip="ui.help.monitor.target">対象数</th>
	                        <th data-dict-key="ui.label.monitor.col.last" data-dict-tip="ui.help.monitor.last">最終結果</th>
	                        <th data-dict-key="ui.label.monitor.col.ctr" data-dict-tip="ui.help.monitor.ctr">反応率</th>
	                        <th data-dict-key="ui.label.monitor.col.health" data-dict-tip="ui.help.monitor.health">健康度</th>
	                      </tr>
	                    </thead>
	                    <tbody id="monitor-rows"></tbody>
	                  </table>
	                </div>
	              </details>
            </div>
            <div class="pane-detail">
              <div class="panel">
                <div class="panel-title" data-dict-key="ui.label.monitor.detail">詳細</div>
                <div class="panel-body">
                  <div id="monitor-detail" class="note">行を選択すると詳細を表示します。</div>
                  <div id="monitor-safe-next-step" class="safe-next-step" data-dict-key="ui.desc.monitor.safeNextStep">次の安全な一手: 反応率が低い通知の詳細を確認する</div>
                  <details>
                    <summary data-dict-key="ui.label.monitor.raw">RAW JSON</summary>
                    <pre id="monitor-raw">-</pre>
                  </details>
                </div>
              </div>
            </div>
            <aside class="pane-actions">
              <div class="action-panel">
                <div class="panel-title" data-dict-key="ui.label.panel.actions">操作パネル</div>
                <div class="panel-body">
                  <div class="note" data-dict-key="ui.desc.monitor.actions">配信結果の取得条件を指定します。</div>
                  <div class="note">
                    <span data-dict-key="ui.label.monitor.userTraceLink">テスト結果を追跡する場合</span>:
                    <button id="monitor-open-trace" type="button" data-dict-key="ui.label.monitor.openTrace">追跡IDで証跡を開く</button>
                  </div>
                  <div class="note">
                    <span data-dict-key="ui.label.traceId" data-dict-tip="ui.help.traceId">追跡ID</span>:
                    <input type="text" id="monitor-trace" class="input-inline input-trace" />
                    <button id="monitor-regen" type="button" data-dict-key="ui.label.trace.regen">再生成</button>
                    <span id="monitor-trace-note"></span>
                  </div>
                  <div class="note">
                    <label data-dict-key="ui.label.monitor.limit" data-dict-tip="ui.help.monitor.limit">件数</label>
                    <input type="number" id="monitor-limit" min="1" max="200" value="50" class="input-inline input-sm" />
                    <label data-dict-key="ui.label.monitor.status" data-dict-tip="ui.help.monitor.status">状態</label>
                    <input type="text" id="monitor-status" class="input-inline input-sm" />
                  </div>
                  <div class="note">
                    <label data-dict-key="ui.label.monitor.scenario" data-dict-tip="ui.help.monitor.scenario">シナリオ</label>
                    <input type="text" id="monitor-scenario" class="input-inline input-xs" />
                    <label data-dict-key="ui.label.monitor.step" data-dict-tip="ui.help.monitor.step">ステップ</label>
                    <input type="text" id="monitor-step" class="input-inline input-xs" />
                  </div>
                  <div class="row row-top">
                    <button id="monitor-reload" type="button" data-dict-key="ui.label.monitor.reload">更新</button>
                  </div>
                  <div id="monitor-skeleton" class="skeleton-stack is-hidden">
                    <div class="skeleton-line lg w-50"></div>
                    <div class="skeleton-line w-70"></div>
                    <div class="skeleton-line w-30"></div>
                  </div>
                </div>
              </div>
            </aside>
          </div>
          </details>
        </section>

        <section id="pane-city-pack" class="app-pane" data-pane="city-pack">
          <div class="decision-card" id="city-pack-decision-card">
            <div class="decision-card-header">
              <div class="decision-title" data-dict-key="ui.label.nav.cityPack">City Pack監査</div>
              <span id="city-pack-decision-state" class="decision-state state-ready">READY</span>
            </div>
            <div id="city-pack-decision-reason1" class="decision-reason">-</div>
            <div id="city-pack-decision-reason2" class="decision-reason">-</div>
            <div class="decision-updated">
              <span data-dict-key="ui.label.decision.updatedAt">最終更新</span>
              <span id="city-pack-decision-updated">-</span>
            </div>
            <div class="decision-actions">
              <button id="city-pack-action-edit" type="button" class="decision-action-btn" data-action-kind="primary" data-dict-key="ui.label.decision.action.createEdit">作成・編集</button>
              <button id="city-pack-action-activate" type="button" class="decision-action-btn" data-action-kind="secondary" data-dict-key="ui.label.decision.action.activate">有効化・公開</button>
              <button id="city-pack-action-disable" type="button" class="decision-action-btn" data-action-kind="tertiary" data-dict-key="ui.label.decision.action.disable">停止・無効化</button>
            </div>
          </div>
          <details id="city-pack-pane-details" class="decision-details section">
            <summary data-dict-key="ui.label.decision.details">詳細</summary>
            <div class="pane-grid">
            <div class="pane-main">
              <div class="panel today-card">
                <div class="panel-title" data-dict-key="ui.label.cityPack.kpi">City Pack監査KPI</div>
                <div class="panel-body">
                  <div class="today-metrics">
                    <div><span class="metric-label" data-dict-key="ui.metric.cityPack.expiredZeroRate">expired sourceゼロ率</span><span id="city-pack-kpi-expired-zero-rate" class="metric-value">-</span></div>
                    <div><span class="metric-label" data-dict-key="ui.metric.cityPack.reviewLag">review滞留時間</span><span id="city-pack-kpi-review-lag" class="metric-value">-</span></div>
                    <div><span class="metric-label" data-dict-key="ui.metric.cityPack.blockRate">source起因ブロック率</span><span id="city-pack-kpi-block-rate" class="metric-value">-</span></div>
                  </div>
                </div>
              </div>
              <div class="panel">
                <div class="panel-title" data-dict-key="ui.label.cityPack.metrics">City Pack効果測定</div>
                <div class="panel-body">
                  <div class="row">
                    <label data-dict-key="ui.label.cityPack.metricsWindowDays" data-dict-tip="ui.help.cityPack.metricsWindowDays">期間
                      <select id="city-pack-metrics-window-days" class="select-inline">
                        <option value="7" data-dict-key="ui.value.cityPack.metricsWindowDays.7">7日</option>
                        <option value="30" data-dict-key="ui.value.cityPack.metricsWindowDays.30">30日</option>
                      </select>
                    </label>
                    <label data-dict-key="ui.label.cityPack.metricsLimit" data-dict-tip="ui.help.cityPack.metricsLimit">件数
                      <input id="city-pack-metrics-limit" type="number" min="1" max="200" value="50" class="input-sm" />
                    </label>
                    <button id="city-pack-metrics-reload" type="button" data-dict-key="ui.label.cityPack.metricsReload">効果測定を更新</button>
                  </div>
                  <div id="city-pack-metrics-summary" class="note" data-dict-key="ui.desc.cityPack.metricsSummary">効果測定: 読み込み待ち</div>
                  <div class="table-scroll">
                    <table class="table-compact">
                      <thead>
                        <tr>
                          <th data-dict-key="ui.label.cityPack.metrics.col.cityPackId">cityPackId</th>
                          <th data-dict-key="ui.label.cityPack.metrics.col.slotId">slotId</th>
                          <th data-dict-key="ui.label.cityPack.metrics.col.sourceRefId">sourceRefId</th>
                          <th data-dict-key="ui.label.cityPack.metrics.col.sent">sent</th>
                          <th data-dict-key="ui.label.cityPack.metrics.col.delivered">delivered</th>
                          <th data-dict-key="ui.label.cityPack.metrics.col.clicked">clicked</th>
                          <th data-dict-key="ui.label.cityPack.metrics.col.ctr">ctr</th>
                          <th data-dict-key="ui.label.cityPack.metrics.col.lastDate">lastDate</th>
                        </tr>
                      </thead>
                      <tbody id="city-pack-metrics-rows"></tbody>
                    </table>
                  </div>
                </div>
              </div>
              <div class="panel">
                <div class="panel-title" data-dict-key="ui.label.cityPack.requestInbox">Request Inbox</div>
                <div class="panel-body">
                  <div class="note" data-dict-key="ui.desc.cityPack.requestInbox">LINE申告から生成されたCity Pack草案を確認し、Approve/Reject/Retryを実行します。</div>
                  <div class="row">
                    <label data-dict-key="ui.label.cityPack.requestStatus" data-dict-tip="ui.help.cityPack.requestStatus">状態
                      <select id="city-pack-request-status-filter" class="select-inline">
                        <option value="" data-dict-key="ui.value.cityPack.requestStatus.all">すべて</option>
                        <option value="queued" data-dict-key="ui.value.cityPack.requestStatus.queued">待機</option>
                        <option value="drafted" data-dict-key="ui.value.cityPack.requestStatus.drafted">草案作成済み</option>
                        <option value="needs_review" data-dict-key="ui.value.cityPack.requestStatus.needsReview">要確認</option>
                        <option value="approved" data-dict-key="ui.value.cityPack.requestStatus.approved">承認済み</option>
                        <option value="active" data-dict-key="ui.value.cityPack.requestStatus.active">有効</option>
                        <option value="rejected" data-dict-key="ui.value.cityPack.requestStatus.rejected">却下</option>
                        <option value="failed" data-dict-key="ui.value.cityPack.requestStatus.failed">失敗</option>
                      </select>
                    </label>
                    <label data-dict-key="ui.label.cityPack.requestRegion" data-dict-tip="ui.help.cityPack.requestRegion">地域キー
                      <input id="city-pack-request-region" type="text" class="input-sm" data-dict-placeholder="ui.placeholder.cityPack.requestRegion" placeholder="TX::austin" />
                    </label>
                    <label data-dict-key="ui.label.cityPack.requestLimit" data-dict-tip="ui.help.cityPack.requestLimit">件数
                      <input id="city-pack-request-limit" type="number" min="1" max="200" value="50" class="input-sm" />
                    </label>
                    <button id="city-pack-request-reload" type="button" data-dict-key="ui.label.cityPack.requestReload">Request更新</button>
                  </div>
                  <table class="table-compact">
                    <thead>
                      <tr>
                        <th data-dict-key="ui.label.cityPack.request.col.status">status</th>
                        <th data-dict-key="ui.label.cityPack.request.col.region">region</th>
                        <th data-dict-key="ui.label.cityPack.request.col.requestId">requestId</th>
                        <th data-dict-key="ui.label.cityPack.request.col.draft">draft</th>
                        <th data-dict-key="ui.label.cityPack.request.col.traceId">traceId</th>
                        <th data-dict-key="ui.label.cityPack.request.col.actions">actions</th>
                      </tr>
                    </thead>
                    <tbody id="city-pack-request-rows"></tbody>
                  </table>
                </div>
              </div>
              <div class="panel">
                <div class="panel-title" data-dict-key="ui.label.cityPack.feedbackInbox">Feedback Inbox</div>
                <div class="panel-body">
                  <div class="note" data-dict-key="ui.desc.cityPack.feedbackInbox">City Packの誤り報告を確認し、対応を記録します。</div>
                  <div class="row">
                    <label data-dict-key="ui.label.cityPack.feedbackStatus" data-dict-tip="ui.help.cityPack.feedbackStatus">状態
                      <select id="city-pack-feedback-status-filter" class="select-inline">
                        <option value="" data-dict-key="ui.value.cityPack.feedbackStatus.all">すべて</option>
                        <option value="queued" data-dict-key="ui.value.cityPack.feedbackStatus.queued">待機</option>
                        <option value="reviewed" data-dict-key="ui.value.cityPack.feedbackStatus.reviewed">確認済み</option>
                        <option value="rejected" data-dict-key="ui.value.cityPack.feedbackStatus.rejected">却下</option>
                        <option value="proposed" data-dict-key="ui.value.cityPack.feedbackStatus.proposed">提案</option>
                      </select>
                    </label>
                    <label data-dict-key="ui.label.cityPack.feedbackLimit" data-dict-tip="ui.help.cityPack.feedbackLimit">件数
                      <input id="city-pack-feedback-limit" type="number" min="1" max="200" value="50" class="input-sm" />
                    </label>
                    <button id="city-pack-feedback-reload" type="button" data-dict-key="ui.label.cityPack.feedbackReload">Feedback更新</button>
                  </div>
                  <table class="table-compact">
                    <thead>
                      <tr>
                        <th data-dict-key="ui.label.cityPack.feedback.col.status">status</th>
                        <th data-dict-key="ui.label.cityPack.feedback.col.region">region</th>
                        <th data-dict-key="ui.label.cityPack.feedback.col.feedback">feedback</th>
                        <th data-dict-key="ui.label.cityPack.feedback.col.traceId">traceId</th>
                        <th data-dict-key="ui.label.cityPack.feedback.col.actions">actions</th>
                      </tr>
                    </thead>
                    <tbody id="city-pack-feedback-rows"></tbody>
                  </table>
                </div>
              </div>
              <div class="panel">
                <div class="panel-title" data-dict-key="ui.label.cityPack.bulletinInbox">Bulletin Inbox</div>
                <div class="panel-body">
                  <div class="row">
                    <label data-dict-key="ui.label.cityPack.bulletinStatus" data-dict-tip="ui.help.cityPack.bulletinStatus">状態
                      <select id="city-pack-bulletin-status-filter" class="select-inline">
                        <option value="" data-dict-key="ui.value.cityPack.bulletinStatus.all">すべて</option>
                        <option value="draft" data-dict-key="ui.value.cityPack.bulletinStatus.draft">下書き</option>
                        <option value="approved" data-dict-key="ui.value.cityPack.bulletinStatus.approved">承認済み</option>
                        <option value="sent" data-dict-key="ui.value.cityPack.bulletinStatus.sent">送信済み</option>
                        <option value="rejected" data-dict-key="ui.value.cityPack.bulletinStatus.rejected">却下</option>
                      </select>
                    </label>
                    <label data-dict-key="ui.label.cityPack.bulletinLimit" data-dict-tip="ui.help.cityPack.bulletinLimit">件数
                      <input id="city-pack-bulletin-limit" type="number" min="1" max="200" value="50" class="input-sm" />
                    </label>
                    <button id="city-pack-bulletin-reload" type="button" data-dict-key="ui.label.cityPack.bulletinReload">Bulletin更新</button>
                  </div>
                  <table class="table-compact">
                    <thead>
                      <tr>
                        <th data-dict-key="ui.label.cityPack.bulletin.col.status">status</th>
                        <th data-dict-key="ui.label.cityPack.bulletin.col.cityPackId">cityPackId</th>
                        <th data-dict-key="ui.label.cityPack.bulletin.col.notificationId">notificationId</th>
                        <th data-dict-key="ui.label.cityPack.bulletin.col.summary">summary</th>
                        <th data-dict-key="ui.label.cityPack.bulletin.col.traceId">traceId</th>
                        <th data-dict-key="ui.label.cityPack.bulletin.col.actions">actions</th>
                      </tr>
                    </thead>
                    <tbody id="city-pack-bulletin-rows"></tbody>
                  </table>
                </div>
              </div>
              <div class="panel">
                <div class="panel-title" data-dict-key="ui.label.cityPack.proposalInbox">Proposal Inbox</div>
                <div class="panel-body">
                  <div class="row">
                    <label data-dict-key="ui.label.cityPack.proposalStatus" data-dict-tip="ui.help.cityPack.proposalStatus">状態
                      <select id="city-pack-proposal-status-filter" class="select-inline">
                        <option value="" data-dict-key="ui.value.cityPack.proposalStatus.all">すべて</option>
                        <option value="draft" data-dict-key="ui.value.cityPack.proposalStatus.draft">下書き</option>
                        <option value="approved" data-dict-key="ui.value.cityPack.proposalStatus.approved">承認済み</option>
                        <option value="applied" data-dict-key="ui.value.cityPack.proposalStatus.applied">適用済み</option>
                        <option value="rejected" data-dict-key="ui.value.cityPack.proposalStatus.rejected">却下</option>
                      </select>
                    </label>
                    <label data-dict-key="ui.label.cityPack.proposalLimit" data-dict-tip="ui.help.cityPack.proposalLimit">件数
                      <input id="city-pack-proposal-limit" type="number" min="1" max="200" value="50" class="input-sm" />
                    </label>
                    <button id="city-pack-proposal-reload" type="button" data-dict-key="ui.label.cityPack.proposalReload">Proposal更新</button>
                  </div>
                  <table class="table-compact">
                    <thead>
                      <tr>
                        <th data-dict-key="ui.label.cityPack.proposal.col.status">status</th>
                        <th data-dict-key="ui.label.cityPack.proposal.col.cityPackId">cityPackId</th>
                        <th data-dict-key="ui.label.cityPack.proposal.col.summary">summary</th>
                        <th data-dict-key="ui.label.cityPack.proposal.col.traceId">traceId</th>
                        <th data-dict-key="ui.label.cityPack.proposal.col.actions">actions</th>
                      </tr>
                    </thead>
                    <tbody id="city-pack-proposal-rows"></tbody>
                  </table>
                </div>
              </div>
              <div class="panel">
                <div class="panel-title" data-dict-key="ui.label.cityPack.reviewInbox">Review Inbox</div>
                <div class="panel-body">
                  <div class="note" data-dict-key="ui.desc.cityPack.reviewInbox">情報源の有効期限と監査結果を確認し、Confirm / Retire / Replace / ManualOnly を実行します。</div>
                  <div class="row">
                    <label data-dict-key="ui.label.cityPack.statusFilter" data-dict-tip="ui.help.cityPack.statusFilter">状態
                      <select id="city-pack-status-filter" class="select-inline">
                        <option value="" data-dict-key="ui.value.cityPack.status.all">すべて</option>
                        <option value="needs_review" data-dict-key="ui.value.cityPack.status.needsReview">要確認</option>
                        <option value="active" data-dict-key="ui.value.cityPack.status.active">有効</option>
                        <option value="dead" data-dict-key="ui.value.cityPack.status.dead">停止</option>
                        <option value="blocked" data-dict-key="ui.value.cityPack.status.blocked">手動対応</option>
                        <option value="retired" data-dict-key="ui.value.cityPack.status.retired">廃止</option>
                      </select>
                    </label>
                    <label data-dict-key="ui.label.cityPack.limit" data-dict-tip="ui.help.cityPack.limit">件数
                      <input id="city-pack-limit" type="number" min="1" max="200" value="50" class="input-sm" />
                    </label>
                    <button id="city-pack-reload" type="button" data-dict-key="ui.label.cityPack.reload">Inbox更新</button>
                  </div>
                  <table class="table-compact">
                    <thead>
                      <tr>
                        <th data-dict-key="ui.label.cityPack.col.priority">priority</th>
                        <th data-dict-key="ui.label.cityPack.col.source">source</th>
                        <th data-dict-key="ui.label.cityPack.col.sourceType">sourceType</th>
                        <th data-dict-key="ui.label.cityPack.col.requiredLevel">requiredLevel</th>
                        <th data-dict-key="ui.label.cityPack.col.confidence">confidence</th>
                        <th data-dict-key="ui.label.cityPack.col.auditStage">auditStage</th>
                        <th data-dict-key="ui.label.cityPack.col.result">result</th>
                        <th data-dict-key="ui.label.cityPack.col.validUntil">validUntil</th>
                        <th data-dict-key="ui.label.cityPack.col.usedBy">usedBy</th>
                        <th data-dict-key="ui.label.cityPack.col.evidence">evidence</th>
                        <th data-dict-key="ui.label.cityPack.col.actions">actions</th>
                      </tr>
                    </thead>
                    <tbody id="city-pack-rows"></tbody>
                  </table>
                </div>
              </div>
            </div>
            <div class="pane-detail">
              <div class="panel">
                <div class="panel-title" data-dict-key="ui.label.cityPack.requestDetail">Request Detail</div>
                <div class="panel-body">
                  <div id="city-pack-request-summary" class="note" data-dict-key="ui.desc.cityPack.requestDetailEmpty">Requestの行を選択すると詳細を表示します。</div>
                  <div class="note row row-top">
                    <span data-dict-key="ui.label.cityPack.structure.packId">対象Draft</span>
                    <span id="city-pack-structure-pack-id">-</span>
                  </div>
                  <details class="section">
                    <summary data-dict-key="ui.label.cityPack.structure.editor">Rule Pack / Slots</summary>
                    <div class="input-grid">
                      <div class="note">
                        <label data-dict-key="ui.label.cityPack.structure.basePackId" data-dict-tip="ui.help.cityPack.structure.basePackId">basePackId</label>
                        <input id="city-pack-structure-base-pack-id" class="input-sm" placeholder="cp_xxx" />
                      </div>
                      <div class="note">
                        <label data-dict-key="ui.label.cityPack.structure.targeting">targetingRules(JSON)</label>
                        <textarea id="city-pack-structure-targeting" class="textarea-code" placeholder="[]"></textarea>
                      </div>
                      <div class="note">
                        <label data-dict-key="ui.label.cityPack.structure.slots">slots(JSON)</label>
                        <textarea id="city-pack-structure-slots" class="textarea-code" placeholder="[]"></textarea>
                      </div>
                    </div>
                    <div class="row row-top">
                      <button id="city-pack-structure-save" type="button" data-dict-key="ui.label.cityPack.structure.save">構造を保存</button>
                    </div>
                  </details>
                  <details class="section">
                    <summary data-dict-key="ui.label.cityPack.requestDetail.raw">RAW</summary>
                    <pre id="city-pack-request-raw">-</pre>
                  </details>
                </div>
              </div>
              <div class="panel">
                <div class="panel-title" data-dict-key="ui.label.cityPack.feedbackDetail">Feedback Detail</div>
                <div class="panel-body">
                  <div id="city-pack-feedback-summary" class="note" data-dict-key="ui.desc.cityPack.feedbackDetailEmpty">Feedbackの行を選択すると詳細を表示します。</div>
                  <details class="section">
                    <summary data-dict-key="ui.label.cityPack.feedbackDetail.raw">RAW</summary>
                    <pre id="city-pack-feedback-raw">-</pre>
                  </details>
                </div>
              </div>
              <div class="panel">
                <div class="panel-title" data-dict-key="ui.label.cityPack.bulletinDraft">Change Bulletin Draft</div>
                <div class="panel-body">
                  <div class="row">
                    <label data-dict-key="ui.label.cityPack.bulletinDraft.cityPackId" data-dict-tip="ui.help.cityPack.bulletinDraft.cityPackId">cityPackId
                      <input id="city-pack-bulletin-city-pack-id" class="input-sm" data-dict-placeholder="ui.placeholder.cityPack.bulletinCityPackId" placeholder="cp_xxx" />
                    </label>
                    <label data-dict-key="ui.label.cityPack.bulletinDraft.notificationId" data-dict-tip="ui.help.cityPack.bulletinDraft.notificationId">notificationId
                      <input id="city-pack-bulletin-notification-id" class="input-sm" data-dict-placeholder="ui.placeholder.cityPack.bulletinNotificationId" placeholder="n_xxx" />
                    </label>
                  </div>
                  <div class="note">
                    <label data-dict-key="ui.label.cityPack.bulletinDraft.summary" data-dict-tip="ui.help.cityPack.bulletinDraft.summary">summary
                      <input id="city-pack-bulletin-summary" class="input-sm" data-dict-placeholder="ui.placeholder.cityPack.bulletinSummary" placeholder="短い変更要約" />
                    </label>
                  </div>
                  <div class="row row-top">
                    <button id="city-pack-bulletin-create" type="button" data-role="admin" data-dict-key="ui.label.cityPack.bulletinDraft.create">Bulletin作成</button>
                  </div>
                </div>
              </div>
              <div class="panel">
                <div class="panel-title" data-dict-key="ui.label.cityPack.proposalDraft">Update Proposal Draft</div>
                <div class="panel-body">
                  <div class="row">
                    <label data-dict-key="ui.label.cityPack.proposalDraft.cityPackId" data-dict-tip="ui.help.cityPack.proposalDraft.cityPackId">cityPackId
                      <input id="city-pack-proposal-city-pack-id" class="input-sm" data-dict-placeholder="ui.placeholder.cityPack.proposalCityPackId" placeholder="cp_xxx" />
                    </label>
                    <label data-dict-key="ui.label.cityPack.proposalDraft.summary" data-dict-tip="ui.help.cityPack.proposalDraft.summary">summary
                      <input id="city-pack-proposal-summary" class="input-sm" data-dict-placeholder="ui.placeholder.cityPack.proposalSummary" placeholder="変更要約" />
                    </label>
                  </div>
                  <div class="note">
                    <label data-dict-key="ui.label.cityPack.proposalDraft.patch" data-dict-tip="ui.help.cityPack.proposalDraft.patch">proposalPatch(JSON)
                      <textarea id="city-pack-proposal-patch" class="textarea-code" data-dict-placeholder="ui.placeholder.cityPack.proposalPatch" placeholder="{ }"></textarea>
                    </label>
                  </div>
                  <div class="row row-top">
                    <button id="city-pack-proposal-create" type="button" data-role="admin" data-dict-key="ui.label.cityPack.proposalDraft.create">Proposal作成</button>
                  </div>
                </div>
              </div>
              <div class="panel">
                <div class="panel-title" data-dict-key="ui.label.cityPack.bulletinDetail">Bulletin Detail</div>
                <div class="panel-body">
                  <div id="city-pack-bulletin-detail-summary" class="note" data-dict-key="ui.desc.cityPack.bulletinDetailEmpty">Bulletinの行を選択すると詳細を表示します。</div>
                  <details class="section">
                    <summary data-dict-key="ui.label.cityPack.bulletinDetail.raw">RAW</summary>
                    <pre id="city-pack-bulletin-raw">-</pre>
                  </details>
                </div>
              </div>
              <div class="panel">
                <div class="panel-title" data-dict-key="ui.label.cityPack.proposalDetail">Proposal Detail</div>
                <div class="panel-body">
                  <div id="city-pack-proposal-detail-summary" class="note" data-dict-key="ui.desc.cityPack.proposalDetailEmpty">Proposalの行を選択すると詳細を表示します。</div>
                  <details class="section">
                    <summary data-dict-key="ui.label.cityPack.proposalDetail.raw">RAW</summary>
                    <pre id="city-pack-proposal-raw">-</pre>
                  </details>
                </div>
              </div>
              <div class="panel">
                <div class="panel-title" data-dict-key="ui.label.cityPack.templateLibrary">Template Library</div>
                <div class="panel-body">
                  <div class="row">
                    <label data-dict-key="ui.label.cityPack.templateLibrary.status" data-dict-tip="ui.help.cityPack.templateLibrary.status">状態
                      <select id="city-pack-template-library-status-filter" class="select-inline">
                        <option value="" data-dict-key="ui.value.cityPack.templateLibrary.status.all">すべて</option>
                        <option value="draft" data-dict-key="ui.value.cityPack.templateLibrary.status.draft">下書き</option>
                        <option value="active" data-dict-key="ui.value.cityPack.templateLibrary.status.active">有効</option>
                        <option value="retired" data-dict-key="ui.value.cityPack.templateLibrary.status.retired">廃止</option>
                      </select>
                    </label>
                    <label data-dict-key="ui.label.cityPack.templateLibrary.limit" data-dict-tip="ui.help.cityPack.templateLibrary.limit">件数
                      <input id="city-pack-template-library-limit" type="number" min="1" max="200" value="50" class="input-sm" />
                    </label>
                    <button id="city-pack-template-library-reload" type="button" data-dict-key="ui.label.cityPack.templateLibrary.reload">Template一覧を更新</button>
                  </div>
                  <div id="city-pack-template-library-summary" class="note" data-dict-key="ui.desc.cityPack.templateLibrarySummary">Template一覧: 読み込み待ち</div>
                  <div class="table-scroll">
                    <table class="table-compact">
                      <thead>
                        <tr>
                          <th data-dict-key="ui.label.cityPack.templateLibrary.col.status">status</th>
                          <th data-dict-key="ui.label.cityPack.templateLibrary.col.name">name</th>
                          <th data-dict-key="ui.label.cityPack.templateLibrary.col.schemaVersion">schemaVersion</th>
                          <th data-dict-key="ui.label.cityPack.templateLibrary.col.source">source</th>
                          <th data-dict-key="ui.label.cityPack.templateLibrary.col.traceId">traceId</th>
                          <th data-dict-key="ui.label.cityPack.templateLibrary.col.actions">actions</th>
                        </tr>
                      </thead>
                      <tbody id="city-pack-template-library-rows"></tbody>
                    </table>
                  </div>
                  <div id="city-pack-template-library-detail-summary" class="note" data-dict-key="ui.desc.cityPack.templateLibraryDetailEmpty">Templateの行を選択すると詳細を表示します。</div>
                  <details class="section">
                    <summary data-dict-key="ui.label.cityPack.templateLibrary.detailRaw">RAW</summary>
                    <pre id="city-pack-template-library-raw">-</pre>
                  </details>
                </div>
              </div>
              <div class="panel">
                <div class="panel-title" data-dict-key="ui.label.cityPack.templateImportExport">Import / Export</div>
                <div class="panel-body">
                  <div class="row">
                    <label data-dict-key="ui.label.cityPack.templateExport.cityPackId" data-dict-tip="ui.help.cityPack.templateExport.cityPackId">cityPackId
                      <input id="city-pack-template-export-pack-id" class="input-sm" data-dict-placeholder="ui.placeholder.cityPack.templateExport.cityPackId" placeholder="cp_xxx" />
                    </label>
                    <button id="city-pack-template-export-run" type="button" data-role="admin" data-dict-key="ui.label.cityPack.templateExport.run">Templateを出力</button>
                    <button id="city-pack-template-library-create" type="button" data-role="admin" data-dict-key="ui.label.cityPack.templateLibrary.create">Templateとして保存</button>
                  </div>
                  <div class="row">
                    <button id="city-pack-template-import-dry-run" type="button" data-role="admin" data-dict-key="ui.label.cityPack.templateImport.dryRun">Import Dry Run</button>
                    <button id="city-pack-template-import-apply" type="button" data-role="admin" data-dict-key="ui.label.cityPack.templateImport.apply">Import Apply</button>
                  </div>
                  <div class="input-grid row-top">
                    <div class="note">
                      <label data-dict-key="ui.label.cityPack.templateImport.planHash">planHash</label>
                      <input id="city-pack-template-import-plan-hash" class="input-sm" readonly />
                    </div>
                    <div class="note">
                      <label data-dict-key="ui.label.cityPack.templateImport.confirmToken">confirmToken</label>
                      <input id="city-pack-template-import-confirm-token" class="input-sm" readonly />
                    </div>
                  </div>
                  <div id="city-pack-template-import-summary" class="note" data-dict-key="ui.desc.cityPack.templateImportSummary">Template import/export: 操作待ち</div>
                  <label class="note" data-dict-key="ui.label.cityPack.templateImport.templateJson" data-dict-tip="ui.help.cityPack.templateImport.templateJson">template(JSON)
                    <textarea id="city-pack-template-json" class="textarea-code" data-dict-placeholder="ui.placeholder.cityPack.templateImport.templateJson" placeholder="{ }"></textarea>
                  </label>
                </div>
              </div>
              <div class="panel">
                <div class="panel-title" data-dict-key="ui.label.cityPack.evidenceViewer">Evidence Viewer</div>
                <div class="panel-body">
                  <div id="city-pack-evidence-summary" class="note" data-dict-key="ui.desc.cityPack.evidence.empty">Inboxの行を選択すると証跡を表示します。</div>
                  <details class="section" open>
                    <summary data-dict-key="ui.label.cityPack.evidence.compare">スクリーンショット比較</summary>
                    <pre id="city-pack-evidence-screenshots">-</pre>
                  </details>
                  <details class="section" open>
                    <summary data-dict-key="ui.label.cityPack.evidence.http">HTTP情報</summary>
                    <pre id="city-pack-evidence-http">-</pre>
                  </details>
                  <details class="section">
                    <summary data-dict-key="ui.label.cityPack.evidence.diff">差分要約（LLM補助）</summary>
                    <pre id="city-pack-evidence-diff">-</pre>
                  </details>
                  <details class="section">
                    <summary data-dict-key="ui.label.cityPack.evidence.impacted">影響CityPack一覧</summary>
                    <pre id="city-pack-evidence-impacted">-</pre>
                  </details>
                </div>
              </div>
            </div>
            <aside class="pane-actions">
              <div class="action-panel">
                <div class="panel-title" data-dict-key="ui.label.panel.actions">操作パネル</div>
                <div class="panel-body">
                  <div class="note" data-dict-key="ui.desc.cityPack.actions">監査ジョブの実行結果は追跡ID付きで保存されます。</div>
                  <div class="note">
                    <label data-dict-key="ui.label.cityPack.runMode" data-dict-tip="ui.help.cityPack.runMode">監査モード</label>
                    <select id="city-pack-run-mode" class="select-inline">
                      <option value="light" data-dict-key="ui.value.cityPack.runMode.light">軽監査</option>
                      <option value="heavy" data-dict-key="ui.value.cityPack.runMode.heavy">重監査</option>
                    </select>
                  </div>
                  <div class="row row-top">
                    <button id="city-pack-run-audit" type="button" data-dict-key="ui.label.cityPack.runAudit">監査ジョブ実行</button>
                    <button id="city-pack-runs-reload" type="button" data-dict-key="ui.label.cityPack.runsReload">実行履歴を更新</button>
                    <button id="city-pack-open-trace" type="button" data-dict-key="ui.label.cityPack.openTrace">追跡IDで証跡を開く</button>
                  </div>
                  <div id="city-pack-safe-step" class="safe-next-step" data-dict-key="ui.desc.cityPack.safeStep">次の安全な一手: Confirm候補を確認して期限を更新する</div>
                  <details class="section">
                    <summary data-dict-key="ui.label.cityPack.sourcePolicy">情報源ポリシー</summary>
                    <div class="note row row-top">
                      <span data-dict-key="ui.label.cityPack.sourcePolicy.sourceRefId">対象sourceRef</span>
                      <span id="city-pack-source-policy-source-ref-id">-</span>
                    </div>
                    <div class="row">
                      <label data-dict-key="ui.label.cityPack.sourceType" data-dict-tip="ui.help.cityPack.sourceType">sourceType
                        <select id="city-pack-source-type" class="select-inline">
                          <option value="official" data-dict-key="ui.value.cityPack.sourceType.official">official</option>
                          <option value="semi_official" data-dict-key="ui.value.cityPack.sourceType.semiOfficial">semi_official</option>
                          <option value="community" data-dict-key="ui.value.cityPack.sourceType.community">community</option>
                          <option value="other" data-dict-key="ui.value.cityPack.sourceType.other">other</option>
                        </select>
                      </label>
                      <label data-dict-key="ui.label.cityPack.requiredLevel" data-dict-tip="ui.help.cityPack.requiredLevel">requiredLevel
                        <select id="city-pack-required-level" class="select-inline">
                          <option value="required" data-dict-key="ui.value.cityPack.requiredLevel.required">required</option>
                          <option value="optional" data-dict-key="ui.value.cityPack.requiredLevel.optional">optional</option>
                        </select>
                      </label>
                      <button id="city-pack-source-policy-save" type="button" data-dict-key="ui.label.cityPack.sourcePolicy.save">ポリシー保存</button>
                    </div>
                  </details>
                  <div class="note" id="city-pack-runs-summary" data-dict-key="ui.desc.cityPack.runsSummary">実行履歴: 読み込み待ち</div>
                  <details class="section" open>
                    <summary data-dict-key="ui.label.cityPack.runResult">実行結果</summary>
                    <div class="note">
                      <label data-dict-key="ui.label.cityPack.runDetail.limit" data-dict-tip="ui.help.cityPack.runDetail.limit">証跡表示件数</label>
                      <input id="city-pack-run-detail-limit" type="number" min="1" max="200" value="50" class="input-sm" />
                    </div>
	                    <div class="note" id="city-pack-run-detail-summary" data-dict-key="ui.desc.cityPack.runDetail.empty">実行履歴の行を選択すると詳細を表示します。</div>
	                    <div class="table-scroll">
	                      <table class="table-compact">
	                        <thead>
	                          <tr>
	                            <th data-dict-key="ui.label.cityPack.runDetail.col.evidence">証跡ID</th>
	                            <th data-dict-key="ui.label.cityPack.runDetail.col.result">結果</th>
	                            <th data-dict-key="ui.label.cityPack.runDetail.col.checkedAt">確認日時</th>
	                            <th data-dict-key="ui.label.cityPack.runDetail.col.statusCode">HTTP</th>
	                            <th data-dict-key="ui.label.cityPack.runDetail.col.action">表示</th>
	                          </tr>
	                        </thead>
	                        <tbody id="city-pack-run-detail-rows"></tbody>
	                      </table>
	                    </div>
                    <details class="section">
                      <summary data-dict-key="ui.label.cityPack.runDetail.raw">RAW</summary>
                      <pre id="city-pack-run-result">-</pre>
                    </details>
                  </details>
	                  <details class="section" open>
	                    <summary data-dict-key="ui.label.cityPack.runs">実行履歴</summary>
	                    <div class="table-scroll">
	                      <table class="table-compact">
	                        <thead>
                          <tr>
                            <th data-dict-key="ui.label.cityPack.runs.col.runId">runId</th>
                            <th data-dict-key="ui.label.cityPack.runs.col.mode">mode</th>
                            <th data-dict-key="ui.label.cityPack.runs.col.stage">stage</th>
                            <th data-dict-key="ui.label.cityPack.runs.col.startedAt">startedAt</th>
                            <th data-dict-key="ui.label.cityPack.runs.col.result">result</th>
                            <th data-dict-key="ui.label.cityPack.runs.col.processed">processed</th>
                            <th data-dict-key="ui.label.cityPack.runs.col.confidence">confidence</th>
                            <th data-dict-key="ui.label.cityPack.runs.col.traceId">traceId</th>
                          </tr>
	                        </thead>
	                        <tbody id="city-pack-run-rows"></tbody>
	                      </table>
	                    </div>
	                  </details>
                </div>
              </div>
            </aside>
          </div>
          </details>
        </section>

        <section id="pane-errors" class="app-pane" data-pane="errors">
          <div class="decision-card" id="errors-decision-card">
            <div class="decision-card-header">
              <div class="decision-title" data-dict-key="ui.label.nav.errors">異常対応</div>
              <span id="errors-decision-state" class="decision-state state-ready">READY</span>
            </div>
            <div id="errors-decision-reason1" class="decision-reason">-</div>
            <div id="errors-decision-reason2" class="decision-reason">-</div>
            <div class="decision-updated">
              <span data-dict-key="ui.label.decision.updatedAt">最終更新</span>
              <span id="errors-decision-updated">-</span>
            </div>
            <div class="decision-actions">
              <button id="errors-action-edit" type="button" class="decision-action-btn" data-action-kind="primary" data-dict-key="ui.label.decision.action.createEdit">作成・編集</button>
              <button id="errors-action-activate" type="button" class="decision-action-btn" data-action-kind="secondary" data-dict-key="ui.label.decision.action.activate">有効化・公開</button>
              <button id="errors-action-disable" type="button" class="decision-action-btn" data-action-kind="tertiary" data-dict-key="ui.label.decision.action.disable">停止・無効化</button>
            </div>
          </div>
          <details id="errors-pane-details" class="decision-details section">
            <summary data-dict-key="ui.label.decision.details">詳細</summary>
            <div class="pane-grid">
            <div class="pane-main">
              <div class="panel">
                <div class="panel-title" data-dict-key="ui.label.errors.recovery">復旧パネル</div>
                <div class="panel-body">
                  <div class="summary-metrics">
                    <div><span class="metric-label" data-dict-key="ui.label.errors.problems">今ある問題</span><span id="errors-problems" class="metric-value">0</span></div>
                    <div><span class="metric-label" data-dict-key="ui.label.errors.recommend">推奨アクション</span><span id="errors-recommend" class="metric-value">-</span></div>
                  </div>
                  <button id="errors-to-ops" type="button" data-dict-key="ui.label.errors.toOps">Opsで復旧する</button>
                </div>
              </div>
              <details class="table-section section" open>
                <summary data-dict-key="ui.label.errors.summary">まとめ</summary>
                <pre id="errors-summary">-</pre>
              </details>
	              <details class="table-section section">
	                <summary data-dict-key="ui.label.errors.warnLinks">危険リンク一覧</summary>
	                <div class="table-scroll">
	                  <table class="table-compact">
	                    <thead>
	                      <tr>
	                        <th data-dict-key="ui.label.errors.linkId" data-dict-tip="ui.help.errors.linkId">リンクID</th>
	                        <th data-dict-key="ui.label.errors.linkTitle" data-dict-tip="ui.help.errors.linkTitle">タイトル</th>
	                        <th data-dict-key="ui.label.errors.linkUrl" data-dict-tip="ui.help.errors.linkUrl">リンク先</th>
	                        <th data-dict-key="ui.label.errors.linkChecked" data-dict-tip="ui.help.errors.linkChecked">最終確認</th>
	                      </tr>
	                    </thead>
	                    <tbody id="errors-warn-rows"></tbody>
	                  </table>
	                </div>
	              </details>
	              <details class="table-section section">
	                <summary data-dict-key="ui.label.errors.retryQueue">再送待ち一覧</summary>
	                <div class="table-scroll">
	                  <table class="table-compact">
	                    <thead>
	                      <tr>
	                        <th data-dict-key="ui.label.errors.queueId" data-dict-tip="ui.help.errors.queueId">キューID</th>
	                        <th data-dict-key="ui.label.errors.lineUserId" data-dict-tip="ui.help.errors.lineUserId">LINEユーザーID</th>
	                        <th data-dict-key="ui.label.errors.template" data-dict-tip="ui.help.errors.template">テンプレ</th>
	                        <th data-dict-key="ui.label.errors.lastError" data-dict-tip="ui.help.errors.lastError">最終エラー</th>
	                        <th data-dict-key="ui.label.errors.updatedAt" data-dict-tip="ui.help.errors.updatedAt">更新日時</th>
	                      </tr>
	                    </thead>
	                    <tbody id="errors-retry-rows"></tbody>
	                  </table>
	                </div>
	              </details>
            </div>
            <div class="pane-detail">
              <div class="panel">
                <div class="panel-title" data-dict-key="ui.label.errors.safeStep">次にやる安全な1手</div>
                <div class="panel-body">
                  <div id="errors-safe-step" class="safe-next-step" data-dict-key="ui.desc.errors.safeStepDefault">更新を押して、最新の送信できなかった理由を確認する</div>
                </div>
              </div>
            </div>
            <aside class="pane-actions">
              <div class="action-panel">
                <div class="panel-title" data-dict-key="ui.label.panel.actions">操作パネル</div>
                <div class="panel-body">
                  <div class="note" data-dict-key="ui.desc.errors.actions">危険リンクと再送待ちを確認します。</div>
                  <div class="note">
                    <span data-dict-key="ui.label.traceId" data-dict-tip="ui.help.traceId">追跡ID</span>:
                    <input type="text" id="errors-trace" class="input-inline input-trace" />
                    <button id="errors-regen" type="button" data-dict-key="ui.label.trace.regen">再生成</button>
                    <span id="errors-trace-note"></span>
                  </div>
                  <div class="row row-top">
                    <button id="errors-reload" type="button" data-dict-key="ui.label.errors.reload">更新</button>
                  </div>
                  <div id="errors-skeleton" class="skeleton-stack is-hidden">
                    <div class="skeleton-line lg w-50"></div>
                    <div class="skeleton-line w-70"></div>
                    <div class="skeleton-line w-30"></div>
                  </div>
                </div>
              </div>
            </aside>
          </div>
          </details>
        </section>

        <section id="pane-read-model" class="app-pane" data-pane="read-model">
          <div class="decision-card" id="read-model-decision-card">
            <div class="decision-card-header">
              <div class="decision-title" data-dict-key="ui.label.nav.readModel">通知集計</div>
              <span id="read-model-decision-state" class="decision-state state-ready">READY</span>
            </div>
            <div id="read-model-decision-reason1" class="decision-reason">-</div>
            <div id="read-model-decision-reason2" class="decision-reason">-</div>
            <div class="decision-updated">
              <span data-dict-key="ui.label.decision.updatedAt">最終更新</span>
              <span id="read-model-decision-updated">-</span>
            </div>
            <div class="decision-actions">
              <button id="read-model-action-edit" type="button" class="decision-action-btn" data-action-kind="primary" data-dict-key="ui.label.decision.action.createEdit">作成・編集</button>
              <button id="read-model-action-activate" type="button" class="decision-action-btn" data-action-kind="secondary" data-dict-key="ui.label.decision.action.activate">有効化・公開</button>
              <button id="read-model-action-disable" type="button" class="decision-action-btn" data-action-kind="tertiary" data-dict-key="ui.label.decision.action.disable">停止・無効化</button>
            </div>
          </div>
          <details id="read-model-pane-details" class="decision-details section">
            <summary data-dict-key="ui.label.decision.details">詳細</summary>
            <div class="pane-grid">
            <div class="pane-main">
              <div class="panel">
                <div class="panel-title" data-dict-key="ui.label.readModel.definition">この集計が示すもの</div>
                <div class="panel-body">
                  <div class="note" data-dict-key="ui.desc.readModel.definition">直近の通知一覧について、送信結果と反応率をまとめた集計です。</div>
                </div>
              </div>
	              <details class="table-section section" open>
	                <summary data-dict-key="ui.label.readModel.table">通知集計（参照）</summary>
	                <div class="table-scroll">
	                  <table class="table-compact">
	                    <thead>
	                      <tr>
	                        <th data-dict-key="ui.label.readModel.col.title" data-dict-tip="ui.help.readModel.title">タイトル</th>
	                        <th data-dict-key="ui.label.readModel.col.scenario" data-dict-tip="ui.help.readModel.scenario">シナリオ</th>
	                        <th data-dict-key="ui.label.readModel.col.step" data-dict-tip="ui.help.readModel.step">ステップ</th>
	                        <th data-dict-key="ui.label.readModel.col.target" data-dict-tip="ui.help.readModel.target">対象数</th>
	                        <th data-dict-key="ui.label.readModel.col.last" data-dict-tip="ui.help.readModel.last">最終結果</th>
	                        <th data-dict-key="ui.label.readModel.col.ctr" data-dict-tip="ui.help.readModel.ctr">反応率</th>
	                        <th data-dict-key="ui.label.readModel.col.health" data-dict-tip="ui.help.readModel.health">健康度</th>
	                      </tr>
	                    </thead>
	                    <tbody id="read-model-rows"></tbody>
	                  </table>
	                </div>
	              </details>
            </div>
            <div class="pane-detail">
              <div class="panel">
                <div class="panel-title" data-dict-key="ui.label.readModel.summaryTip">先に見る3項目</div>
                <div class="panel-body">
                  <div class="note" data-dict-key="ui.desc.readModel.tip1">要対応（反応率が低い通知）を最初に確認します。</div>
                </div>
              </div>
            </div>
            <aside class="pane-actions">
              <div class="action-panel">
                <div class="panel-title" data-dict-key="ui.label.panel.actions">操作パネル</div>
                <div class="panel-body">
                  <div class="note" data-dict-key="ui.desc.readModel.actions">集計結果を取得します。</div>
                  <div class="note">
                    <span data-dict-key="ui.label.traceId" data-dict-tip="ui.help.traceId">追跡ID</span>:
                    <input type="text" id="read-model-trace" class="input-inline input-trace" />
                    <button id="read-model-regen" type="button" data-dict-key="ui.label.trace.regen">再生成</button>
                    <span id="read-model-trace-note"></span>
                  </div>
                  <div class="row row-top">
                    <button id="read-model-reload" type="button" data-dict-key="ui.label.readModel.reload">更新</button>
                  </div>
                  <div id="read-model-skeleton" class="skeleton-stack is-hidden">
                    <div class="skeleton-line lg w-50"></div>
                    <div class="skeleton-line w-70"></div>
                    <div class="skeleton-line w-30"></div>
                  </div>
                </div>
              </div>
            </aside>
          </div>
          </details>
        </section>

        <section id="pane-vendors" class="app-pane" data-pane="vendors">
          <div class="decision-card" id="vendors-decision-card">
            <div class="decision-card-header">
              <div class="decision-title" data-dict-key="ui.label.nav.vendors">Vendor Hub</div>
              <span id="vendors-decision-state" class="decision-state state-ready">READY</span>
            </div>
            <div id="vendors-decision-reason1" class="decision-reason">-</div>
            <div id="vendors-decision-reason2" class="decision-reason">-</div>
            <div class="decision-updated">
              <span data-dict-key="ui.label.decision.updatedAt">最終更新</span>
              <span id="vendors-decision-updated">-</span>
            </div>
            <div class="decision-actions">
              <button id="vendors-action-edit" type="button" class="decision-action-btn" data-action-kind="primary" data-dict-key="ui.label.decision.action.createEdit">作成・編集</button>
              <button id="vendors-action-activate" type="button" class="decision-action-btn" data-action-kind="secondary" data-dict-key="ui.label.decision.action.activate">有効化・公開</button>
              <button id="vendors-action-disable" type="button" class="decision-action-btn" data-action-kind="tertiary" data-dict-key="ui.label.decision.action.disable">停止・無効化</button>
            </div>
          </div>
          <details id="vendors-pane-details" class="decision-details section">
            <summary data-dict-key="ui.label.decision.details">詳細</summary>
            <div class="pane-grid">
              <div class="pane-main">
	                <details class="table-section section" open>
	                  <summary data-dict-key="ui.label.vendors.table">Vendor一覧</summary>
	                  <div class="table-scroll">
	                    <table class="table-compact">
	                      <thead>
	                        <tr>
	                          <th data-dict-key="ui.label.vendors.col.vendor">Vendor</th>
	                          <th data-dict-key="ui.label.vendors.col.state">状態</th>
	                          <th data-dict-key="ui.label.vendors.col.lastChecked">最終確認</th>
	                          <th data-dict-key="ui.label.vendors.col.linkId">リンクID</th>
	                        </tr>
	                      </thead>
	                      <tbody id="vendor-rows"></tbody>
	                    </table>
	                  </div>
	                </details>
              </div>
              <div class="pane-detail">
                <div class="panel">
                  <div class="panel-title" data-dict-key="ui.label.vendors.detail">詳細</div>
                  <div class="panel-body">
                    <div id="vendor-detail" class="note">行を選択すると詳細を表示します。</div>
                    <details>
                      <summary data-dict-key="ui.label.vendors.raw">RAW JSON</summary>
                      <pre id="vendor-raw">-</pre>
                    </details>
                  </div>
                </div>
              </div>
              <aside class="pane-actions">
                <div class="action-panel">
                  <div class="panel-title" data-dict-key="ui.label.panel.actions">操作パネル</div>
                  <div class="panel-body">
                    <div class="note">
                      <span data-dict-key="ui.label.traceId" data-dict-tip="ui.help.traceId">追跡ID</span>:
                      <input type="text" id="vendor-trace" class="input-inline input-trace" />
                      <button id="vendor-regen" type="button" data-dict-key="ui.label.trace.regen">再生成</button>
                      <span id="vendor-trace-note"></span>
                    </div>
                    <div class="note">
                      <label data-dict-key="ui.label.vendors.state" data-dict-tip="ui.help.vendors.state">状態</label>
                      <input id="vendor-state" class="input-inline input-sm" />
                      <label data-dict-key="ui.label.vendors.limit" data-dict-tip="ui.help.vendors.limit">件数</label>
                      <input id="vendor-limit" type="number" min="1" max="200" value="50" class="input-inline input-sm" />
                    </div>
                    <div class="row row-top">
                      <button id="vendor-reload" type="button" data-dict-key="ui.label.vendors.reload">更新</button>
                    </div>
                    <div class="row row-top">
                      <button id="vendor-edit" type="button" data-dict-key="ui.label.vendors.edit">作成・編集</button>
                      <button id="vendor-activate" type="button" data-dict-key="ui.label.vendors.activate">有効化・公開</button>
                      <button id="vendor-disable" type="button" data-dict-key="ui.label.vendors.disable">停止・無効化</button>
                    </div>
                    <div id="vendor-skeleton" class="skeleton-stack is-hidden">
                      <div class="skeleton-line lg w-50"></div>
                      <div class="skeleton-line w-70"></div>
                      <div class="skeleton-line w-30"></div>
                    </div>
                  </div>
                </div>
              </aside>
            </div>
          </details>
        </section>

        <section id="pane-audit" class="app-pane" data-pane="audit">
          <div class="pane-grid">
            <div class="pane-main">
              <div class="panel">
                <div class="panel-title" data-dict-key="ui.label.audit.search">監査検索</div>
                <div class="panel-body">
                  <div class="note">
                    <span data-dict-key="ui.label.traceId" data-dict-tip="ui.help.traceId">追跡ID</span>:
                    <input type="text" id="audit-trace" class="input-inline input-trace" />
                    <button id="audit-search" type="button" data-dict-key="ui.label.audit.searchBtn">検索</button>
                    <span id="audit-note"></span>
                  </div>
                  <pre id="audit-result">-</pre>
                </div>
              </div>
            </div>
            <div class="pane-detail">
              <div class="panel">
                <div class="panel-title" data-dict-key="ui.label.audit.detail">詳細</div>
                <div class="panel-body">
                  <pre id="audit-detail">-</pre>
                </div>
              </div>
            </div>
            <aside class="pane-actions">
              <div class="action-panel">
                <div class="panel-title" data-dict-key="ui.label.panel.actions">操作パネル</div>
                <div class="panel-body">
                  <p class="note" data-dict-key="ui.desc.audit.actions">traceIdで証跡を確認します。</p>
                </div>
              </div>
            </aside>
          </div>
        </section>

        <section id="pane-llm" class="app-pane" data-pane="llm" data-role="admin">
          <div class="pane-grid">
            <div class="pane-main">
              <div class="panel">
                <div class="panel-title" data-dict-key="ui.label.llm.validation">LLM検証</div>
                <div class="panel-body">
                  <div class="input-grid">
                    <div>
                      <label data-dict-key="ui.label.llm.lineUserId" data-dict-tip="ui.help.llm.lineUserId">LINEユーザーID</label>
                      <input id="llm-line-user-id" data-dict-placeholder="ui.desc.llm.lineUserIdPlaceholder" placeholder="" />
                    </div>
                    <div>
                      <label data-dict-key="ui.label.llm.question" data-dict-tip="ui.help.llm.question">FAQ質問</label>
                      <input id="llm-faq-question" data-dict-placeholder="ui.desc.llm.questionPlaceholder" placeholder="" />
                    </div>
                  </div>
                </div>
              </div>
              <div class="panel">
                <div class="panel-title" data-dict-key="ui.label.llm.results">結果</div>
                <div class="panel-body">
                  <details class="section" open>
                    <summary data-dict-key="ui.label.llm.opsExplain">Ops説明</summary>
                    <pre id="llm-ops-explain-result">-</pre>
                  </details>
                  <details class="section">
                    <summary data-dict-key="ui.label.llm.nextActions">次アクション候補</summary>
                    <pre id="llm-next-actions-result">-</pre>
                  </details>
                  <details class="section">
                    <summary data-dict-key="ui.label.llm.faqAnswer">FAQ回答</summary>
                    <pre id="llm-faq-result">-</pre>
                    <div id="llm-faq-block" class="llm-block-panel is-hidden">
                      <div class="llm-block-title" data-dict-key="ui.label.llm.block.title">回答を停止しました</div>
                      <div class="llm-block-row">
                        <span class="llm-block-label" data-dict-key="ui.label.llm.block.reason">停止理由</span>
                        <span id="llm-faq-block-reason" class="llm-block-value">-</span>
                      </div>
                      <div class="llm-block-row">
                        <span class="llm-block-label" data-dict-key="ui.label.llm.block.actions">代替アクション</span>
                        <ul id="llm-faq-block-actions" class="llm-block-list"></ul>
                      </div>
                      <div class="llm-block-row">
                        <span class="llm-block-label" data-dict-key="ui.label.llm.block.suggested">候補FAQ</span>
                        <ul id="llm-faq-block-suggested" class="llm-block-list"></ul>
                      </div>
                    </div>
                  </details>
                </div>
              </div>
            </div>
            <div class="pane-detail">
              <div class="panel">
                <div class="panel-title" data-dict-key="ui.label.llm.policy">運用ポリシー</div>
                <div class="panel-body">
                  <p data-dict-key="ui.desc.llm.policy">提案のみ。自動実行は行いません。最終判断は運用担当が実施します。</p>
                </div>
              </div>
              <div class="panel">
                <div class="panel-title" data-dict-key="ui.label.llm.config">LLM設定</div>
                <div class="panel-body">
                  <label data-dict-key="ui.label.llm.config.enabled" data-dict-tip="ui.help.llm.config.enabled">LLM提案機能</label>
                  <select id="llm-config-enabled">
                    <option value="true" data-dict-key="ui.value.llm.enabled">有効</option>
                    <option value="false" data-dict-key="ui.value.llm.disabled">停止</option>
                  </select>
                  <div class="row row-top">
                    <button id="llm-config-reload" type="button" data-dict-key="ui.label.llm.config.reload">状態更新</button>
                    <button id="llm-config-plan" type="button" data-dict-key="ui.label.llm.config.plan">計画</button>
                    <button id="llm-config-set" type="button" data-dict-key="ui.label.llm.config.set">適用</button>
                  </div>
                  <details class="section">
                    <summary data-dict-key="ui.label.llm.config.status">状態</summary>
                    <pre id="llm-config-status">-</pre>
                  </details>
                  <details class="section">
                    <summary data-dict-key="ui.label.llm.config.planResult">計画結果</summary>
                    <pre id="llm-config-plan-result">-</pre>
                  </details>
                  <details class="section">
                    <summary data-dict-key="ui.label.llm.config.setResult">適用結果</summary>
                    <pre id="llm-config-set-result">-</pre>
                  </details>
                </div>
              </div>
            </div>
            <aside class="pane-actions">
              <div class="action-panel">
                <div class="panel-title" data-dict-key="ui.label.panel.actions">操作パネル</div>
                <div class="panel-body">
                  <div class="note" data-dict-key="ui.desc.llm.actions">追跡IDを付けて実行し、結果を証跡として確認します。</div>
                  <div class="note">
                    <span data-dict-key="ui.label.traceId" data-dict-tip="ui.help.traceId">追跡ID</span>:
                    <input type="text" id="llm-trace" class="input-inline input-trace" />
                    <button id="llm-regen" type="button" data-dict-key="ui.label.trace.regen">再生成</button>
                    <span id="llm-trace-note"></span>
                  </div>
                  <div class="row row-top">
                    <button id="llm-run-ops-explain" type="button" data-dict-key="ui.label.llm.runOpsExplain">Ops説明を取得</button>
                    <button id="llm-run-next-actions" type="button" data-dict-key="ui.label.llm.runNextActions">次候補を取得</button>
                  </div>
                  <div class="row row-top">
                    <button id="llm-run-faq" type="button" data-dict-key="ui.label.llm.runFaq">FAQ回答を生成</button>
                  </div>
                  <div class="row row-top">
                    <button id="llm-open-audit" type="button" data-dict-key="ui.label.llm.openAudit">証跡を開く</button>
                  </div>
                </div>
              </div>
            </aside>
          </div>
        </section>

        <section id="pane-settings" class="app-pane" data-pane="settings">
          <div class="pane-grid">
            <div class="pane-main">
              <div class="panel">
                <div class="panel-title" data-dict-key="ui.label.settings.notice">設定は管理者で操作</div>
                <div class="panel-body">
                  <p data-dict-key="ui.desc.settings.notice">設定・回復は /admin/master に集約されています。</p>
                </div>
              </div>
            </div>
            <div class="pane-detail"></div>
            <aside class="pane-actions">
              <div class="action-panel">
                <div class="panel-title" data-dict-key="ui.label.panel.actions">操作パネル</div>
                <div class="panel-body">
                  <a class="btn" href="/admin/master" data-dict-key="ui.label.settings.toMaster">設定画面へ</a>
                </div>
              </div>
            </aside>
          </div>
        </section>

        <section id="pane-maintenance" class="app-pane" data-pane="maintenance" data-role="admin">
          <div class="pane-grid">
            <div class="pane-main">
              <div class="panel">
                <div class="panel-title" data-dict-key="ui.label.maintenance.notice">保守操作はMasterで実行</div>
                <div class="panel-body">
                  <p data-dict-key="ui.desc.maintenance.notice">配信回復/補正は /admin/master に集約されています。</p>
                </div>
              </div>
            </div>
            <div class="pane-detail"></div>
            <aside class="pane-actions">
              <div class="action-panel">
                <div class="panel-title" data-dict-key="ui.label.panel.actions">操作パネル</div>
                <div class="panel-body">
                  <a class="btn" href="/admin/master" data-dict-key="ui.label.maintenance.toMaster">回復画面へ</a>
                </div>
              </div>
            </aside>
          </div>
        </section>
      </main>
    </div>

    <div id="toast" class="toast" role="status" aria-live="polite"></div>

    <script src="/admin/assets/admin_app.js"></script>
  </body>
</html>
