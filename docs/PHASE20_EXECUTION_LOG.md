# Phase20 Execution Log

## 追記ルール
- UTC必須
- 事実のみ
- 推論は別セクションに分離

## 事実ログ
- UTC: 2026-02-03T04:28:27.547Z
  - Script: scripts/phase20_cta_ab_stats.js
  - Conditions: ctaTextA="open", ctaTextB="open"
  - Output: {"utc":"2026-02-03T04:28:27.547Z","projectId":"member-485303","ctaTextA":"open","ctaTextB":"open","sentCountA":0,"clickCountA":0,"sentCountB":0,"clickCountB":0,"scannedDocs":0}
- UTC: 2026-02-03T04:53:19.653Z
  - Script: scripts/phase20_cta_ab_stats.js
  - Conditions: ctaTextA="openA", ctaTextB="openB", fromUtc="2026-02-03T00:00:00Z", toUtc="2026-02-04T00:00:00Z"
  - Output: {"utc":"2026-02-03T04:53:19.653Z","projectId":"member-485303","ctaTextA":"openA","ctaTextB":"openB","fromUtc":"2026-02-03T00:00:00Z","toUtc":"2026-02-04T00:00:00Z","filterField":null,"sentCountA":0,"clickCountA":0,"sentCountB":0,"clickCountB":0,"scannedDocs":0}
- UTC: 2026-02-03T15:18:27.540Z
  - LinkRegistry: linkRegistryId="yOIE1l86ak1AVULB79xJ", url="https://example.com"
  - Notifications: notificationIdA="GCwbGqnmDfQvKtZhSIyj" (ctaText="openA"), notificationIdB="4PTArpmCxkcHDVmBzIs1" (ctaText="openB")
  - test-send: attemptsA=10 (HTTP 200 count=10), attemptsB=10 (HTTP 200 count=10)
  - Deliveries: deliveryIdA="4HUqNnNDA9WRwHWI28po", deliveryIdB="h8gKda9VjySeuXs1uBGg"
  - track/click: clickA httpStatus=403 (saved to /tmp/phase20_click_A.log), clickB httpStatus=403 (saved to /tmp/phase20_click_B.log)
  - Script: scripts/phase20_cta_ab_stats.js
  - Command: node scripts/phase20_cta_ab_stats.js "openA" "openB" "2026-02-03T00:00:00Z" "2026-02-04T00:00:00Z"
  - Output: {"utc":"2026-02-03T15:18:27.540Z","projectId":"member-485303","ctaTextA":"openA","ctaTextB":"openB","fromUtc":"2026-02-03T00:00:00Z","toUtc":"2026-02-04T00:00:00Z","filterField":null,"sentCountA":0,"clickCountA":0,"sentCountB":0,"clickCountB":0,"scannedDocs":0}
- UTC: 2026-02-03T15:58:19.157Z
  - LinkRegistry: linkRegistryId="B5cCN5yslidhJzPHNL3k", url="https://example.com"
  - Notifications: notificationIdA="Tx9ndqE2vurRXLr9J4M9" (ctaText="openA"), notificationIdB="dGrkHXReMjZM5ydR4GsI" (ctaText="openB")
  - test-send: attemptsA=10, attemptsB=10
  - Deliveries: deliveryIdA="OU2ObGXA4L90xM1Nbrtt", deliveryIdB="mJI2Xo0e8PmCvNSAbVWi"
  - track/click: clickA httpStatus=403 (saved to /tmp/phase20_click_A.log), clickB httpStatus=403 (saved to /tmp/phase20_click_B.log)
  - Script: scripts/phase20_cta_ab_stats.js
  - Command: node scripts/phase20_cta_ab_stats.js "openA" "openB" "2026-02-03T00:00:00Z" "2026-02-04T00:00:00Z"
  - Output: {"utc":"2026-02-03T15:58:19.157Z","projectId":"member-485303","ctaTextA":"openA","ctaTextB":"openB","fromUtc":"2026-02-03T00:00:00Z","toUtc":"2026-02-04T00:00:00Z","filterField":null,"sentCountA":0,"clickCountA":0,"sentCountB":0,"clickCountB":0,"scannedDocs":0}
- UTC: 2026-02-03T17:16:03.174Z
  - LinkRegistry: linkRegistryId="wKr9J9x40U1q3bI2HTmT", url="https://example.com"
  - Notifications: notificationIdA="BfuRnwZtlkDvzxqmCXIa" (ctaText="openA"), notificationIdB="S2XLX8rqF8pxSqYSQt3C" (ctaText="openB")
  - test-send: attemptsA=10, attemptsB=10
  - Deliveries: deliveryIdA="eMKz7gnT7WfsDrEKztz2", deliveryIdB="vvago2nmzAqYUC5TFfV7"
  - track/click: clickA httpStatus=403 (saved to /tmp/phase20_click_A.log), clickB httpStatus=403 (saved to /tmp/phase20_click_B.log)
  - Script: scripts/phase20_cta_ab_stats.js
  - Command: node scripts/phase20_cta_ab_stats.js "openA" "openB" "2026-02-03T00:00:00Z" "2026-02-04T00:00:00Z"
  - Output: {"utc":"2026-02-03T17:16:03.174Z","projectId":"member-485303","ctaTextA":"openA","ctaTextB":"openB","fromUtc":"2026-02-03T00:00:00Z","toUtc":"2026-02-04T00:00:00Z","filterField":null,"sentCountA":0,"clickCountA":0,"sentCountB":0,"clickCountB":0,"scannedDocs":0}
- UTC: 2026-02-03T17:38:50.800Z
  - LinkRegistry: linkRegistryId="c5JfFu6bBqhbLtw32KLF", url="https://example.com"
  - Notifications: notificationIdA="G6XWq1bLMSGw2Ullaa5q" (ctaText="openA"), notificationIdB="P07VoWrZyeEHhTLJAPck" (ctaText="openB")
  - test-send: attemptsA=10, attemptsB=10
  - Deliveries: deliveryIdA="wa1naEZ2vTYKbqHsK6Os", deliveryIdB="R2tzbhtROkuQuvyzs0E7"
  - track/click: clickA httpStatus=403 (saved to /tmp/phase20_click_A.log), clickB httpStatus=403 (saved to /tmp/phase20_click_B.log)
  - Script: scripts/phase20_cta_ab_stats.js
  - Command: node scripts/phase20_cta_ab_stats.js "openA" "openB" "2026-02-03T00:00:00Z" "2026-02-04T00:00:00Z"
  - Output: {"utc":"2026-02-03T17:38:50.800Z","projectId":"member-485303","ctaTextA":"openA","ctaTextB":"openB","fromUtc":"2026-02-03T00:00:00Z","toUtc":"2026-02-04T00:00:00Z","filterField":null,"sentCountA":0,"clickCountA":0,"sentCountB":0,"clickCountB":0,"scannedDocs":0}
- UTC: 2026-02-03T23:35:38Z
  - Track service: member-track (projectId="member-485303", region="us-east1"), url="https://member-track-pvxgenwkba-ue.a.run.app"
  - requestId: "05370f41-5be1-4822-8a39-7364e82faef5"
  - Input: deliveryId="wa1naEZ2vTYKbqHsK6Os", linkRegistryId="c5JfFu6bBqhbLtw32KLF"
  - Command: curl -i -H "content-type: application/json; charset=utf-8" -H "x-request-id: 05370f41-5be1-4822-8a39-7364e82faef5" --data '{"deliveryId":"wa1naEZ2vTYKbqHsK6Os","linkRegistryId":"c5JfFu6bBqhbLtw32KLF"}' "https://member-track-pvxgenwkba-ue.a.run.app/track/click"
  - Result: httpStatus=302, location="https://example.com"
  - Saved log: /tmp/phase20_t04a_track_click_unauth.log
- UTC: 2026-02-04T00:08:24Z
  - Track service: member-track (projectId="member-485303", region="us-east1"), url="https://member-track-pvxgenwkba-ue.a.run.app"
  - Inputs: linkRegistryId="Ls61KJFtn3YtYLpkzf1q", deliveryIdA="rA2PagUnCtcIRiloYHvm", deliveryIdB="TpUwG4XQXdNdi6GwTJ12"
  - RequestIds: requestIdA="6d6980c6-87cc-4fb2-a78f-1b52e4bcfc80", requestIdB="a08cc3f9-1de4-452c-8467-fe160474251c"
  - Command A: curl -i -H "content-type: application/json; charset=utf-8" -H "x-request-id: 6d6980c6-87cc-4fb2-a78f-1b52e4bcfc80" --data '{"deliveryId":"rA2PagUnCtcIRiloYHvm","linkRegistryId":"Ls61KJFtn3YtYLpkzf1q"}' "https://member-track-pvxgenwkba-ue.a.run.app/track/click"
  - Result A: httpStatus=302, location="https://example.com" (saved to /tmp/phase20_t04a_click_A_unauth.log)
  - Command B: curl -i -H "content-type: application/json; charset=utf-8" -H "x-request-id: a08cc3f9-1de4-452c-8467-fe160474251c" --data '{"deliveryId":"TpUwG4XQXdNdi6GwTJ12","linkRegistryId":"Ls61KJFtn3YtYLpkzf1q"}' "https://member-track-pvxgenwkba-ue.a.run.app/track/click"
  - Result B: httpStatus=302, location="https://example.com" (saved to /tmp/phase20_t04a_click_B_unauth.log)
- UTC: 2026-02-04T01:17:26.800Z
  - Base: member (projectId="member-485303"), url="https://member-pvxgenwkba-ue.a.run.app"
  - LinkRegistry: linkRegistryId="346nilTwuybQHTkaFEET", url="https://example.com"
  - Notifications: notificationIdA="CbM2l3ulnPgh4Lepo5Gc" (ctaText="openA"), notificationIdB="i3nBx20joUhhQn6jCw7l" (ctaText="openB")
  - test-send: attemptsA=10, attemptsB=10
  - Deliveries: deliveryIdA="OTEMEtXKu8vkPSGwTwDT", deliveryIdB="QujAh75lqG28F27FnU2p"
  - track/click (base member): clickA httpStatus=403 (saved to /tmp/phase20_click_A.log), clickB httpStatus=403 (saved to /tmp/phase20_click_B.log)
  - Script: scripts/phase20_cta_ab_stats.js
  - Command: node scripts/phase20_cta_ab_stats.js "openA" "openB" "2026-02-03T00:00:00Z" "2026-02-04T00:00:00Z"
  - Output: {"utc":"2026-02-04T01:17:26.800Z","projectId":"member-485303","ctaTextA":"openA","ctaTextB":"openB","fromUtc":"2026-02-03T00:00:00Z","toUtc":"2026-02-04T00:00:00Z","filterField":null,"sentCountA":0,"clickCountA":0,"sentCountB":0,"clickCountB":0,"scannedDocs":0}
- UTC: 2026-02-04T02:07:00.976Z
  - Base: member (projectId="member-485303"), url="https://member-pvxgenwkba-ue.a.run.app"
  - LinkRegistry: linkRegistryId="EOO7eirlAMrBfpipGjs2", url="https://example.com"
  - Notifications: notificationIdA="RIEe0T08qMmHxlC2x5lO" (ctaText="openA"), notificationIdB="c3PVaR1tqajJ5o7QU3v9" (ctaText="openB")
  - test-send: attemptsA=10, attemptsB=10
  - Deliveries: deliveryIdA="yCxLPI4f8ik2vozJ2PRh", deliveryIdB="w40cB4xRfrNxGRlhdUc8"
  - track/click (base member): clickA httpStatus=403 (saved to /tmp/phase20_click_A.log), clickB httpStatus=403 (saved to /tmp/phase20_click_B.log)
  - Script: scripts/phase20_cta_ab_stats.js
  - Command: node scripts/phase20_cta_ab_stats.js "openA" "openB" "2026-02-03T00:00:00Z" "2026-02-04T00:00:00Z"
  - Output: {"utc":"2026-02-04T02:07:00.976Z","projectId":"member-485303","ctaTextA":"openA","ctaTextB":"openB","fromUtc":"2026-02-03T00:00:00Z","toUtc":"2026-02-04T00:00:00Z","filterField":null,"sentCountA":0,"clickCountA":0,"sentCountB":0,"clickCountB":0,"scannedDocs":0}
- UTC: 2026-02-04T02:34:14.565Z
  - Base: member (projectId="member-485303"), url="https://member-pvxgenwkba-ue.a.run.app"
  - LinkRegistry: linkRegistryId="DDFB4msJaggWHvGRjn0X", url="https://example.com"
  - Notifications: notificationIdA="3nmdw5d2Dh4rOLO9sdCP" (ctaText="openA"), notificationIdB="ExaqNeVpYtiYzT9vIFZM" (ctaText="openB")
  - test-send: attemptsA=10, attemptsB=10
  - Deliveries: deliveryIdA="s19pmCbHXNvFTxPwzRnW", deliveryIdB="O6OuHBx2wtNwbk2sgeg7"
  - track/click (base member): clickA httpStatus=403 (saved to /tmp/phase20_click_A.log), clickB httpStatus=403 (saved to /tmp/phase20_click_B.log)
  - Script: scripts/phase20_cta_ab_stats.js
  - Command: node scripts/phase20_cta_ab_stats.js "openA" "openB" "2026-02-03T00:00:00Z" "2026-02-04T00:00:00Z"
  - Output: {"utc":"2026-02-04T02:34:14.565Z","projectId":"member-485303","ctaTextA":"openA","ctaTextB":"openB","fromUtc":"2026-02-03T00:00:00Z","toUtc":"2026-02-04T00:00:00Z","filterField":null,"sentCountA":0,"clickCountA":0,"sentCountB":0,"clickCountB":0,"scannedDocs":0}

- UTC: 2026-02-04T03:11:23.196Z
  - LinkRegistry: linkRegistryId="mW1uYBYEMTD4JZB6S8MB", url="https://example.com"
  - Notifications: notificationIdA="VKOKjMlDtpNswftBOy6M" (ctaText="openA"), notificationIdB="10YmQzrEsAtAjNChkBRe" (ctaText="openB")
  - test-send: attemptsA=10 (HTTP 200 count=10), attemptsB=10 (HTTP 200 count=10)
  - Deliveries: deliveryIdA="j3zlWw9KnoZ7r7nDAIVY", deliveryIdB="ioxemi8OW4coDR3nruXT"
  - track/click: clickA httpStatus=302, location="https://example.com" (saved to /tmp/phase20_click_A.log), clickB httpStatus=302, location="https://example.com" (saved to /tmp/phase20_click_B.log)
  - Script: scripts/phase20_cta_ab_stats.js
  - Command: node scripts/phase20_cta_ab_stats.js "openA" "openB" "2026-02-03T00:00:00Z" "2026-02-04T00:00:00Z"
  - Output: {"utc":"2026-02-04T03:11:23.196Z","projectId":"member-485303","ctaTextA":"openA","ctaTextB":"openB","fromUtc":"2026-02-03T00:00:00Z","toUtc":"2026-02-04T00:00:00Z","filterField":null,"sentCountA":0,"clickCountA":0,"sentCountB":0,"clickCountB":0,"scannedDocs":0}

- UTC: 2026-02-04T03:36:52.803Z
  - Base: member (projectId="member-485303"), url="https://member-pvxgenwkba-ue.a.run.app"
  - LinkRegistry: linkRegistryId="6NJm5zT8jQ2qKErAI5wY", url="https://example.com"
  - Notifications: notificationIdA="fHd8nJ4A0AYwkupj8Bmx" (ctaText="openA"), notificationIdB="J7pWKaXotvYfMmZn42FH" (ctaText="openB")
  - test-send: attemptsA=10, attemptsB=10
  - Deliveries: deliveryIdA="c6BD3da4uV4PTmA7RP3J", deliveryIdB="j4A0o1l4DDLrzJagjnO2"
  - track/click (base member): clickA httpStatus=403 (saved to /tmp/phase20_click_A.log), clickB httpStatus=403 (saved to /tmp/phase20_click_B.log)
  - Script: scripts/phase20_cta_ab_stats.js
  - Command: node scripts/phase20_cta_ab_stats.js "openA" "openB" "2026-02-03T00:00:00Z" "2026-02-04T00:00:00Z"
  - Output: {"utc":"2026-02-04T03:36:52.803Z","projectId":"member-485303","ctaTextA":"openA","ctaTextB":"openB","fromUtc":"2026-02-03T00:00:00Z","toUtc":"2026-02-04T00:00:00Z","filterField":null,"sentCountA":0,"clickCountA":0,"sentCountB":0,"clickCountB":0,"scannedDocs":0}

- UTC: 2026-02-05T00:58:06Z
  - main SHA: d655cc351fbe0dcb171d3ee88913869592e08beb
  - Track service: member-track (projectId="member-485303"), url="https://member-track-pvxgenwkba-ue.a.run.app"
  - Inputs: linkRegistryId="Ls61KJFtn3YtYLpkzf1q", deliveryId="rA2PagUnCtcIRiloYHvm", requestId="cafe23e9-0ce2-48b3-8545-1031036563ab"
  - Command (unauth click): curl -i -H "x-request-id: cafe23e9-0ce2-48b3-8545-1031036563ab" -H "content-type: application/json; charset=utf-8" --data '{"deliveryId":"rA2PagUnCtcIRiloYHvm","linkRegistryId":"Ls61KJFtn3YtYLpkzf1q"}' "https://member-track-pvxgenwkba-ue.a.run.app/track/click"
  - Result (unauth click): httpStatus=302, location="https://example.com" (saved to /tmp/t05_click_headers_after_merge_cafe23e9-0ce2-48b3-8545-1031036563ab.txt)
  - Log (member-track): [OBS] action=click-write result=ok deliveryId=rA2PagUnCtcIRiloYHvm ctaText=openA linkRegistryId=Ls61KJFtn3YtYLpkzf1q (saved to /tmp/t05_track_logs_after_merge_cafe23e9-0ce2-48b3-8545-1031036563ab.txt)
  - Script: scripts/phase20_cta_ab_stats.js
  - Command: node scripts/phase20_cta_ab_stats.js "openA" "openB" "2026-02-03T00:00:00Z" "2026-02-04T00:00:00Z"
  - Output: {"utc":"2026-02-05T00:57:22.634Z","projectId":"member-485303","ctaTextA":"openA","ctaTextB":"openB","fromUtc":"2026-02-03T00:00:00Z","toUtc":"2026-02-04T00:00:00Z","filterField":"createdAt","sentCountA":0,"clickCountA":3,"sentCountB":0,"clickCountB":0,"scannedDocs":1} (saved to /tmp/t05_stats_after_merge_cafe23e9-0ce2-48b3-8545-1031036563ab.json)

- UTC: 2026-02-05T01:36:56.707Z
  - main SHA: f3486fcfb32718e374d9574940cbd540adb1e758
  - Track service: member-track (projectId="member-485303"), url="https://member-track-pvxgenwkba-ue.a.run.app"
  - Inputs: linkRegistryId="Ls61KJFtn3YtYLpkzf1q", deliveryId="rA2PagUnCtcIRiloYHvm"
  - Command (unauth click): curl -i -H "content-type: application/json; charset=utf-8" --data '{"deliveryId":"rA2PagUnCtcIRiloYHvm","linkRegistryId":"Ls61KJFtn3YtYLpkzf1q"}' "https://member-track-pvxgenwkba-ue.a.run.app/track/click"
  - Result (unauth click): httpStatus=302, location="https://example.com" (saved to /tmp/phase20_t06_click_20260205T013653Z.txt)
  - Script: scripts/phase20_cta_ab_stats.js
  - Command: node scripts/phase20_cta_ab_stats.js "openA" "openB" "2026-02-03T00:00:00Z" "2026-02-05T00:00:00Z"
  - Output: {"utc":"2026-02-05T01:36:56.707Z","projectId":"member-485303","ctaTextA":"openA","ctaTextB":"openB","fromUtc":"2026-02-03T00:00:00Z","toUtc":"2026-02-05T00:00:00Z","filterField":"createdAt","sentCountA":0,"clickCountA":4,"sentCountB":0,"clickCountB":0,"scannedDocs":1} (saved to /tmp/phase20_t06_stats_20260205T013655Z.json)

## 推論ログ
Phase20-T06 判定: CTA click が実測で集計されることを確認（CLOSE 可）
